(this["webpackJsonpwork-time-scheduler"]=this["webpackJsonpwork-time-scheduler"]||[]).push([[0],{276:function(e,t,n){},281:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},423:function(e,t,n){},427:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(21),a=n.n(o),s=(n.p,n(276),n(42)),c=n(32),d=n(84),p=n(85),u=n(90),l=n(89),h=n(477),b=n(38),f=n(56),m=n(111),j=n(81),O=n(485),v=n(482),x=n(484),y=n(486),S=n(190),g=n(88),k="ADD_APPOINTMENTS",w="UPDATED_APPOINTMENT",D="DELETE_APPOINTMENT",T="ADD_JOB",E="UPDATE_JOB",A="DELETE_JOB",C=function(e){return{type:k,payload:e}},P=n(10),M=n.n(P),F=(n(281),"APPOINTMENT_STATE_TO_DO"),I="APPOINTMENT_STATE_COMPLETED",N="APPOINTMENT_STATE_CURRENT",R="APPOINTMENT_STATE_LATE",_="APPOINTMENT_STATE_DELAY",J="SCHEDULE_WORK_ONLY",V="SCHEDULE_FREE_TIME",B="SCHEDULE_FULL",Y="JOB_NOT_STARTED",H=n(488),U=n(489);function L(e,t,n,i,r){var o=Object(m.a)(i,2),a=o[0],c=o[1],d=Object(m.a)(r,2),p=d[0],u=d[1],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(a&&c){var h=q(a,c,t,n,e,l),b=z(h);if(0!=h.length&&b>=e)return{state:J,periods:h};if(p&&u){var f=e-b,j=q(p,u,t,n,f,l),O=z(j),v=W([].concat(Object(s.a)(h),Object(s.a)(j)));return 0!=j.length&&b+O>=e?{state:V,periods:v}:{state:B,periods:v}}console.error("It was nescessary to use free time, but there was no free period start or end configured!")}else console.error("There was no work period start or end configured!")}function q(e,t,n,i,r,o){for(var a=[],s=o?o.clone():M()().add(1,"day").startOf("day").set("hour",e),c={start:null,end:null,hours:0};s.isBefore(n);){if(0!=r)if(c.start){if(z([].concat(a,[{hours:1+c.hours}]))>=r){c.end=s.clone(),c.hours++,a.push(Object.assign({},c)),c={start:null,end:null,hours:0};break}}else if(z(a)>=r)break;var d=i.find((function(e){return!!s.isBetween(e.startDate,e.endDate,void 0,"[)")}));if(d)c.start&&(c.end=s.clone(),c.hours++,a.push(Object.assign({},c)),c={start:null,end:null,hours:0}),s=d.endDate.isSameOrAfter(d.endDate.clone().startOf("day").set("hour",t))?s.add(1,"day").set("hour",e):s.set("hour",d.endDate.get("hour"));else{if(s.isSameOrAfter(n)){c.start&&(c.end=s.clone(),c.hours++,a.push(Object.assign({},c)));break}s.isSameOrAfter(s.clone().set("hour",t))?(c.start&&(c.end=s.clone(),c.hours++,a.push(Object.assign({},c)),c={start:null,end:null,hours:0}),s=s.add(1,"day").set("hour",e)):(c.start?(c.end=s.clone(),c.hours++):c.start=s.clone(),s=s.add(1,"hour"))}}return a}function W(e){var t=[],n=[];return e.forEach((function(i,r){if(!n.includes(r)){var o=e.findIndex((function(e){return i.end.isSame(e.start)}));-1!==o&&(n.push(o),i.end=e[o].end,i.hours=i.end.diff(i.start,"hours")),t.push(i)}})),t}function z(e){return e.reduce((function(e,t){return{hours:e.hours+t.hours}}),{hours:0}).hours}var K=n(487),$=n(13),G={labelCol:{span:8},wrapperCol:{span:16}},Q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var i;return Object(d.a)(this,n),(i=t.call(this,e)).formRef=r.a.createRef(),i.state={isModalVisible:!1,isFutherActionModalVisible:!1,appointmentPreview:null,appointmentPeriods:[],appointmentSuccessful:!1},i}return Object(p.a)(n,[{key:"resetFormState",value:function(){this.setState({isModalVisible:!1,isFutherActionModalVisible:!1,appointmentPreview:null,appointmentPeriods:[],appointmentSuccessful:!1})}},{key:"onFormSubmit",value:function(e){var t=this.props.jobs.length,n=this.state.appointmentPeriods.map((function(n,i){return{startDate:n.start,endDate:n.end,title:e.name,price:e.price,description:e.description,state:F,hours:n.hours,id:"job_"+t+"_app_"+i,jobId:t}})),i={id:t,name:e.name,appointments:n.map((function(e){return e.id})),price:e.price,description:e.description,dueDate:e.dueDate,totalHours:e.hours,state:Y};this.props.addJob(i),this.props.addAppointments(n),this.resetFormState(),this.formRef.current.resetFields()}},{key:"previewPeriods",value:function(e,t){var n=Object(m.a)(e,1)[0],i=Object(m.a)(t,5),r=(i[0],i[1],i[2],i[3]),o=i[4],a=this.props,s=a.appointments,c=a.workStart,d=a.workEnd,p=a.freeStart,u=a.freeEnd;if(n.name.includes("hours")||n.name.includes("dueDate"))if(r.value&&o.value){var l=L(r.value,o.value,s,[c,d],[p,u]);if(!l)return void console.error("Error on saving the periods");switch(l.state){case J:this.setState({appointmentPreview:"The job can be sucessfully distributed in the work period",appointmentPeriods:l.periods,appointmentSuccessful:!0});break;case V:this.setState({appointmentPreview:"The job will invade some of your free time period",appointmentPeriods:l.periods,appointmentSuccessful:!0});break;case B:this.setState({appointmentPreview:"The job could not be distributed into your work/free time, further action will be required on submit",appointmentPeriods:l.periods,appointmentSuccessful:!1})}}else this.setState({appointmentPreview:"",appointmentPeriods:[]})}},{key:"onFutherActionSet",value:function(e){var t=this,n=this.props,i=n.appointments,r=n.workStart,o=n.workEnd,a=n.freeStart,c=n.freeEnd,d=this.formRef.current.getFieldsValue(),p=d.dueDate,u=d.hours,l=W(q(e?Math.min(r,a):Math.max(o,c),e?Math.max(o,c):Math.min(r,a),e?p.set("year",9999):p,[].concat(Object(s.a)(i),Object(s.a)(this.state.appointmentPeriods)),u-z(this.state.appointmentPeriods),e?p:M()().startOf("day").set("hour",Math.max(o,c))),this.state.appointmentPeriods);this.setState({appointmentPeriods:l,appointmentSuccessful:!0,appointmentPreview:"",isModalVisible:!1,isFutherActionModalVisible:!1},(function(){return t.onFormSubmit(t.formRef.current.getFieldsValue())}))}},{key:"allowFormToBeSubmitted",value:function(){var e=this.props,t=e.workStart,n=e.workEnd,i=e.freeStart,r=e.freeEnd;return!!(t&&n&&i&&r)}},{key:"validateDueDate",value:function(e,t){return M()().isSameOrAfter(t)?Promise.reject("The due date needs to be after now!"):Promise.resolve()}},{key:"render",value:function(){var e=this,t=this.allowFormToBeSubmitted();return Object($.jsxs)(r.a.Fragment,{children:[Object($.jsx)(j.a,{type:"primary",onClick:function(){return e.setState({isModalVisible:!0})},children:"Add Event"}),Object($.jsx)(O.a,{title:"Add Event",visible:this.state.isModalVisible,okText:"Submit",onCancel:this.resetFormState.bind(this),onOk:function(){e.formRef.current.validateFields().then((function(t){e.state.appointmentSuccessful?e.onFormSubmit(t):e.setState({isFutherActionModalVisible:!0})})).catch((function(e){console.log("Validate Failed:",e)}))},okButtonProps:{disabled:!t},children:Object($.jsxs)(v.a,Object(c.a)(Object(c.a)({},G),{},{ref:this.formRef,name:"eventForm",initialValues:{remember:!0},onFinish:function(t){return e.onFormSubmit(t)},onFieldsChange:this.previewPeriods.bind(this),children:[Object($.jsx)(v.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"The event name is required"}],children:Object($.jsx)(x.a,{disabled:!t})}),Object($.jsx)(v.a.Item,{label:"Description",name:"description",children:Object($.jsx)(x.a.TextArea,{disabled:!t})}),Object($.jsx)(v.a.Item,{label:"Price",name:"price",children:Object($.jsx)(y.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},min:0,precision:2,disabled:!t})}),Object($.jsx)(v.a.Item,{label:"Estimated Hours",name:"hours",rules:[{required:!0,message:"The ETA is required to allow the scheduler to distribute time"}],disabled:!t,children:Object($.jsx)(y.a,{min:0})}),Object($.jsx)(v.a.Item,{label:"Due Date",name:"dueDate",rules:[{required:!0,message:"The dude date is required"},{validator:this.validateDueDate}],disabled:!t,children:Object($.jsx)(S.a,{format:"DD/MM/YYYY HH:00",showTime:!0})}),Object($.jsx)("span",{className:"message",children:this.state.appointmentPreview}),t?null:Object($.jsx)("span",{className:"message",children:"Please set the work and free period before attemping to add events to your schedule"})]}))}),Object($.jsx)(O.a,{visible:this.state.isFutherActionModalVisible,footer:[Object($.jsx)(K.a,{title:"Delay",children:Object($.jsx)(j.a,{type:"primary",onClick:function(){return e.onFutherActionSet(!0)},icon:Object($.jsx)(H.a,{})})},"delay"),Object($.jsx)(K.a,{title:"Overwrite Sleep",children:Object($.jsx)(j.a,{type:"primary",onClick:function(){return e.onFutherActionSet(!1)},icon:Object($.jsx)(U.a,{})})},"overwrite_sleep"),Object($.jsx)(j.a,{onClick:function(){return e.setState({isFutherActionModalVisible:!1})},children:"Cancel"},"back")],children:Object($.jsx)("p",{children:"The appointment submitted can't be concluded during your work and free period, what should the scheduler do to allow for this job to be scheduled?"})})]})}}]),n}(r.a.Component),X=Object(g.b)((function(e){return{workStart:e.period.workStart,workEnd:e.period.workEnd,freeStart:e.period.freeStart,freeEnd:e.period.freeEnd,appointments:e.appointment.appointments,jobs:e.appointment.jobs}}),(function(e){return{addAppointments:function(t){return e(C(t))},addJob:function(t){return e({type:T,payload:t})}}}))(Q),Z=n(479),ee="SET_WORK_PERIOD",te="SET_FREE_PERIOD",ne="WORK_PERIOD",ie="FREE_PERIOD",re=(n(352),Z.a.RangePicker),oe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var i;return Object(d.a)(this,n),(i=t.call(this,e)).formRef=r.a.createRef(),i.state={isModalVisible:!1},i}return Object(p.a)(n,[{key:"onFormSubmit",value:function(e){switch(this.props.periodType){case ne:this.props.setWorkPeriod({start:e.periodRange[0].get("hours"),end:e.periodRange[1].get("hours")});break;case ie:this.props.setFreePeriod({start:e.periodRange[0].get("hours"),end:e.periodRange[1].get("hours")})}this.setState({isModalVisible:!1})}},{key:"getPeriodLabel",value:function(e){switch(e){case ie:return"Free";case ne:return"Work"}}},{key:"render",value:function(){var e=this;return Object($.jsxs)("div",{children:[Object($.jsxs)(j.a,{onClick:function(){return e.setState({isModalVisible:!0})},children:[this.getPeriodLabel(this.props.periodType)," Period"]}),Object($.jsx)(O.a,{title:"".concat(this.getPeriodLabel(this.props.periodType)," Period"),visible:this.state.isModalVisible,okText:"Submit",onCancel:function(){return e.setState({isModalVisible:!1})},onOk:function(){e.formRef.current.validateFields().then((function(t){e.onFormSubmit(t)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object($.jsx)(v.a,{ref:this.formRef,name:"periodForm",initialValues:{periodRange:[M()().startOf("day").set("hours",this.props.start),M()().startOf("day").set("hours",this.props.end)],remember:!0},onFinish:function(t){return e.onFormSubmit(t)},children:Object($.jsx)(v.a.Item,{name:"periodRange",rules:[{required:!0,message:"The range of the period is required!"}],children:Object($.jsx)(re,{format:"HH:00"})})})})]})}}]),n}(r.a.Component),ae=Object(g.b)((function(e,t){switch(t.periodType){case ne:return{start:new Number(e.period.workStart),end:new Number(e.period.workEnd)};case ie:return{start:e.period.freeStart,end:e.period.freeEnd};default:return{}}}),(function(e){return{setWorkPeriod:function(t){return e({type:ee,payload:t})},setFreePeriod:function(t){return e({type:te,payload:t})}}}))(oe),se=(n(353),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(d.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"onFormSubmit",value:function(){}},{key:"render",value:function(){return Object($.jsxs)("header",{children:[Object($.jsx)("h2",{children:"Work Scheduler"}),Object($.jsxs)("div",{className:"button-group",children:[Object($.jsx)(ae,{periodType:ne}),Object($.jsx)(ae,{periodType:ie}),Object($.jsx)(X,{})]})]})}}]),n}(r.a.Component)),ce=n(123),de=n(160),pe=n(490),ue=(n(354),n(478)),le=n(480),he=n(481),be=n(137),fe=n.n(be),me=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var i;return Object(d.a)(this,n),(i=t.call(this,e)).state={appointmentUpdateInterval:null,isRealocateModalVisible:!1,realocatedState:{state:"",periods:[],appointment:null,job:null}},i}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.onUpdateAppointmentsState()}},{key:"componentWillUnmount",value:function(){this.state.appointmentUpdateInterval&&(clearTimeout(this.state.appointmentUpdateInterval),this.setState({appointmentUpdateInterval:null}))}},{key:"onUpdateAppointmentsState",value:function(){var e=this;this.props.appointments.forEach((function(t){var n=e.checkStateOfAppointment(t);t.state!==n&&(console.log("New state"+n+"for appoitnment"+t.id),t.state=n,e.props.updateAppointment(t))}));var t=M()().add(1,"hour").startOf("hour").diff(M()(),"milliseconds");this.setState({appointmentUpdateInterval:setTimeout((function(){return e.onUpdateAppointmentsState()}),t)})}},{key:"checkStateOfAppointment",value:function(e){if(e.state===I)return I;var t=this.findJobOfAppointment(e);return e.startDate.isAfter(t.dueDate)?_:e.endDate.isBefore(M()())?R:e.startDate.isAfter(M()())?F:N}},{key:"TableTimeCellRenderer",value:function(e){var t=this.props,n=t.workStart,i=t.workEnd,r=t.freeStart,o=t.freeEnd,a=M()(e.startDate),s=M()(e.endDate),d="sleep-period";return this.isHoursBetween(n,i,a,s)?d="work-period":this.isHoursBetween(r,o,a,s)&&(d="free-period"),Object($.jsx)(f.e.TimeTableCell,Object(c.a)(Object(c.a)({},e),{},{className:d}))}},{key:"isHoursBetween",value:function(e,t,n,i){var r=n.clone().startOf("day").set("hour",e),o=i.clone().startOf("day").set("hour",t);return n.isBetween(r,o,void 0,"[)")&&i.isBetween(r,o,void 0,"(]")}},{key:"getCustomAppointmentContent",value:function(e){var t=e.data,n=e.formatDate,i=this.findJobOfAppointment(t);return Object($.jsx)(f.b.AppointmentContent,Object(c.a)(Object(c.a)({},e),{},{style:{height:"100%"},children:Object($.jsxs)("div",{className:"app-appointment-content",children:[Object($.jsx)("div",{className:"title",children:t.title}),t.price?Object($.jsxs)("div",{className:"value-wrapper",children:["$ ",t.price.toFixed(2)]}):null,Object($.jsxs)("span",{children:["Due to: ",i.dueDate.format("DD/MM/YYYY HH:00")]}),Object($.jsxs)("div",{className:"hour-wrapper",children:[Object($.jsx)("span",{children:n(t.startDate,{hour:"numeric",minute:"numeric"})}),Object($.jsx)("span",{style:{padding:"0px 3px"},children:" - "}),Object($.jsx)("span",{children:n(t.endDate,{hour:"numeric",minute:"numeric"})})]})]})}))}},{key:"getTooltipContent",value:function(e){var t=this,n=e.appointmentData,i=e.formatDate,r=this.findJobOfAppointment(n);return r?Object($.jsxs)("div",{className:"tooltip-content",children:[Object($.jsxs)(ue.a,{container:!0,alignItems:"flex-start",className:"meta",children:[Object($.jsx)(ue.a,{item:!0,xs:2,style:{display:"flex",justifyContent:"center"},children:Object($.jsx)(le.a,{className:"lens",style:{color:n.state===F?"#1890ff":n.state===I?"#a4b1db":n.state===N?"green":n.state===R?"orange":"crimson"}})}),Object($.jsxs)(ue.a,{item:!0,xs:10,children:[Object($.jsx)("div",{className:"title",children:n.title}),Object($.jsx)("div",{children:n.startDate.format("dddd, DD MMMM YYYY")})]})]}),Object($.jsxs)(ue.a,{container:!0,alignItems:"center",style:{marginTop:"10px"},children:[Object($.jsx)(ue.a,{item:!0,xs:2,style:{display:"flex",justifyContent:"center",color:"gray"},children:Object($.jsx)(ce.a,{style:{fontSize:"24px"}})}),Object($.jsx)(ue.a,{item:!0,xs:10,children:Object($.jsx)("div",{children:"".concat(i(n.startDate,{hour:"numeric",minute:"numeric"}),"\n                            - ").concat(i(n.endDate,{hour:"numeric",minute:"numeric"}))})})]}),Object($.jsxs)(ue.a,{container:!0,alignItems:"center",children:[Object($.jsx)(ue.a,{item:!0,xs:2,style:{display:"flex",justifyContent:"center",color:"gray"},children:Object($.jsx)(he.a,{style:{fontSize:"24px"}})}),Object($.jsx)(ue.a,{item:!0,xs:10,children:Object($.jsxs)("span",{children:["Due at ",r.dueDate.format("dddd, DD MMMM YYYY HH:00")]})})]}),n.description?Object($.jsx)("p",{className:"description",children:n.description}):null,Object($.jsxs)("div",{className:"tooltip-wrapper",children:[Object($.jsx)(j.a,{onClick:function(){return t.onCompleteTheAppointment(n)},icon:Object($.jsx)(de.a,{}),size:"large",children:"Complete"}),Object($.jsx)(j.a,{onClick:function(){return t.onDelayTheAppointment(n)},icon:Object($.jsx)(H.a,{}),size:"large",children:"Delay"}),Object($.jsx)(j.a,{onClick:function(){return t.onFinishTheAppointment(n)},icon:Object($.jsx)(pe.a,{}),size:"large",children:"Finish"})]})]}):null}},{key:"onCompleteTheAppointment",value:function(e){var t=this.props,n=t.appointments,i=t.jobs,r=Object(s.a)(n),o=r.findIndex((function(t){return t.id===e.id}));if(-1!==o){r[o].state=I;var a=i.find((function(t){return t.id===e.jobId}));this.shouldDeleteJob(a,r)?this.props.deleteJob(a):(this.props.updateAppointment(r[o]),this.props.updateJob(this.onUpdateJobStateOnAppointmentChange(a,r)))}else console.error("Unknown appointment was completed!")}},{key:"onUpdateJobStateOnAppointmentChange",value:function(e,t){var n=t.filter((function(t){return e.appointments.includes(t.id)}));return 0===n.filter((function(e){return e.state===F||e.state===N||e.state===_||e.state===R})).length?e.state="JOB_COMPLETED":0===n.filter((function(e){return e.state===I})).length?e.state=Y:e.state="JOB_ON_GOING",e}},{key:"shouldDeleteJob",value:function(e,t){return 0===t.filter((function(t){return e.appointments.includes(t.id)})).filter((function(e){return e.state===F||e.state===N||e.state===_||e.state===R})).length}},{key:"onDelayTheAppointment",value:function(e){var t=this.props,n=t.workStart,i=t.workEnd,r=t.freeStart,o=t.freeEnd,a=t.appointments,s=this.findJobOfAppointment(e);console.log("appointment.endDate",e.endDate.format("DD/MM/YYYY HH:mm"));var d=L(e.hours,s.dueDate,a,[n,i],[r,o],e.endDate);console.log(d),d.state===V||d===B?this.setState({realocatedState:Object(c.a)(Object(c.a)({},d),{},{appointment:e,job:s}),isRealocateModalVisible:!0}):this.onConfirmationOfRealocation(Object(c.a)(Object(c.a)({},d),{},{appointment:e,job:s}))}},{key:"onConfirmationOfRealocation",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t||this.state.realocatedState,i=n.periods,r=(n.state,n.job),o=n.appointment,a=i.map((function(e,t){return{startDate:e.start,endDate:e.end,title:r.name,price:r.price,description:r.description,state:F,hours:e.hours,id:"job_"+r.id+"_app_"+(r.appointments.length+t),jobId:r.id}})),c=r.appointments.findIndex((function(e){return e===o.id}));(e=r.appointments).splice.apply(e,[c,1].concat(Object(s.a)(a.map((function(e){return e.id}))))),this.props.updateJob(r),this.props.deleteAppointment([o.id]),this.props.addAppointments(a),this.setState({isRealocateModalVisible:!1,realocatedState:null})}},{key:"onFinishTheAppointment",value:function(e){var t=this.findJobOfAppointment(e);this.props.deleteJob(t)}},{key:"getAppointmentComponet",value:function(e){var t,n=e.children,i=e.style,r=e.data;return r.state===I?t="appointment-done":r.state===N?t="appointment-active":r.state===R?t="appointment-late":r.state===_&&(t="appointment-delay"),Object($.jsx)(f.b.Appointment,Object(c.a)(Object(c.a)({},e),{},{className:t,style:Object(c.a)({},i),children:n}))}},{key:"getStartDayHour",value:function(){return this.props.workStart&&this.props.freeStart?Math.min(this.props.workStart,this.props.freeStart):0}},{key:"getEndDayHour",value:function(){return this.props.workEnd&&this.props.freeEnd?Math.max(this.props.workEnd,this.props.freeEnd):24}},{key:"findJobOfAppointment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.props.jobs.findIndex((function(t){return t.id===e.jobId})):this.props.jobs.find((function(t){return t.id===e.jobId}))}},{key:"onAppointmentChangeCommited",value:function(e){var t=this,n=this.props.appointments;if(e.deleted){var i=n.find((function(t){return t.id===e.deleted})),r=this.findJobOfAppointment(i),o=Object(s.a)(n);o.splice(o.findIndex((function(t){return t.id===e.deleted})),1),this.shouldDeleteJob(r,o)?this.props.deleteJob(r):(r.appointments.splice(r.appointments.findIndex((function(t){return t===e.deleted})),1),this.props.deleteAppointment([e.deleted]),this.props.updateJob(r))}e.changed&&Object.keys(e.changed).forEach((function(i){var r=e.changed[i],o=r.endDate,a=r.startDate,s=n.find((function(e){return e.id===i})),c=M()(a),d=M()(o);24===d.diff(c,"hours")&&(c.set("hour",t.props.workStart),d=c.clone().set("hour",t.props.workStart+s.hours)),s.startDate=c,s.endDate=d,t.props.updateAppointment(s)}))}},{key:"render",value:function(){var e=this;return Object($.jsxs)("div",{id:"home-wrapper",children:[Object($.jsx)(se,{}),Object($.jsx)(h.a,{children:Object($.jsxs)(f.h,{locale:"en-UK",data:this.props.appointments,children:[Object($.jsx)(b.s,{defaultCurrentViewName:"Week"}),Object($.jsx)(b.k,{onCommitChanges:this.onAppointmentChangeCommited.bind(this)}),Object($.jsx)(b.m,{}),Object($.jsx)(f.c,{}),Object($.jsx)(f.e,{cellDuration:60,timeTableCellComponent:this.TableTimeCellRenderer.bind(this)}),Object($.jsx)(f.k,{cellDuration:60,timeTableCellComponent:this.TableTimeCellRenderer.bind(this)}),Object($.jsx)(f.g,{}),Object($.jsx)(f.i,{}),Object($.jsx)(f.j,{}),Object($.jsx)(f.d,{}),Object($.jsx)(f.b,{appointmentComponent:this.getAppointmentComponet.bind(this),appointmentContentComponent:this.getCustomAppointmentContent.bind(this)}),Object($.jsx)(f.a,{showCloseButton:!0,showDeleteButton:!0,contentComponent:this.getTooltipContent.bind(this)}),Object($.jsx)(f.f,{allowResize:function(){return!1}})]})}),this.state.realocatedState?Object($.jsx)(fe.a,{visible:this.state.isRealocateModalVisible,onOk:function(){return e.onConfirmationOfRealocation()},onCancel:function(){return e.setState({isRealocateModalVisible:!1,realocatedState:null})},children:this.state.realocatedState.state===V?Object($.jsx)("p",{children:"The appointment submitted can't be concluded during your work period, do you want to allocate your free time for this appointment?"}):Object($.jsx)("p",{children:"The appointment submitted can't be concluded during your work or free time, should the scheduler ignore your sleep period and allocate time in it?"})}):null]})}}]),n}(r.a.Component),je=Object(g.b)((function(e){return{workStart:e.period.workStart,workEnd:e.period.workEnd,freeStart:e.period.freeStart,freeEnd:e.period.freeEnd,appointments:e.appointment.appointments,jobs:e.appointment.jobs}}),(function(e){return{addAppointments:function(t){return e(C(t))},updateAppointment:function(t){return e({type:w,payload:t})},deleteAppointment:function(t){return e({type:D,payload:t})},updateJob:function(t){return e({type:E,payload:t})},deleteJob:function(t){return e({type:A,payload:t})}}}))(me);var Oe=function(){return Object($.jsx)(je,{})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,491)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),o(e),a(e)}))},xe=(n(422),n(423),n(75)),ye=n(156),Se=n(252),ge=n.n(Se);function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.findIndex((function(e){return e.id===t.id}));if(-1===n)return console.error("The update operation on appointments failed, no appointment with id "+t.id+" found"),e;var i=Object(s.a)(e);return i[n]=t,i}function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.findIndex((function(e){return e.id===t.id}));if(-1===n)return console.error("The update operation on jobs failed, no job with id "+t.id+" found"),e;var i=Object(s.a)(e);return i[n]=t,i}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.map((function(t){return e.findIndex((function(e){return e.id===t}))})),i=Object(s.a)(e);return n.forEach((function(e){return i.splice(e,1)})),i}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=t.findIndex((function(t){return t.id===e.id})),r=Object(s.a)(t);r.splice(i,1);var o=Object(s.a)(n);return e.appointments.forEach((function(e){var t=o.findIndex((function(t){return t.id===e}));o.splice(t,1)})),{jobs:r,appointments:o}}var Ee={appointments:[],jobs:[],history:[]},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(c.a)(Object(c.a)({},e),{},{appointments:[].concat(Object(s.a)(e.appointments),Object(s.a)(t.payload))});case w:return Object(c.a)(Object(c.a)({},e),{},{appointments:ke(e.appointments,t.payload)});case D:return Object(c.a)(Object(c.a)({},e),{},{appointments:De(e.appointments,t.payload)});case T:return Object(c.a)(Object(c.a)({},e),{},{jobs:[].concat(Object(s.a)(e.jobs),[t.payload])});case E:return Object(c.a)(Object(c.a)({},e),{},{jobs:we(e.jobs,t.payload)});case A:var n=Te(t.payload,e.jobs,e.appointments),i=n.jobs,r=n.appointments;return Object(c.a)(Object(c.a)({},e),{},{jobs:i,appointments:r});default:return e}},Ce=n(138),Pe=function(e,t){return t instanceof M.a?t.toISOString():t},Me=function(e,t){return"string"===typeof t&&t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?M()(t):t},Fe={workStart:null,workEnd:null,freeStart:null,freeEnd:null},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(c.a)(Object(c.a)({},e),{},{workStart:t.payload.start,workEnd:t.payload.end});case te:return Object(c.a)(Object(c.a)({},e),{},{freeStart:t.payload.start,freeEnd:t.payload.end});default:return e}},Ne={key:"root",storage:ge.a,transforms:[Object(Ce.a)((function(e){return JSON.stringify(e,Pe)}),(function(e){return JSON.parse(e,Me)}))]},Re=Object(xe.c)({period:Ie,appointment:Ae}),_e=Object(ye.a)(Ne,Re);n(426);var Je=Object(xe.d)(_e,xe.a.apply(void 0,[])),Ve=Object(ye.b)(Je),Be=n(253);a.a.render(Object($.jsx)(r.a.StrictMode,{children:Object($.jsx)(g.a,{store:Je,children:Object($.jsx)(Be.a,{persistor:Ve,children:Object($.jsx)(Oe,{})})})}),document.getElementById("root")),ve()}},[[427,1,2]]]);
//# sourceMappingURL=main.4b3505c5.chunk.js.map