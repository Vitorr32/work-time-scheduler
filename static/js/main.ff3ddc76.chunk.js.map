{"version":3,"sources":["logo.svg","redux/appointment/appointment.types.js","redux/appointment/appointment.actions.js","utils/constants.js","utils/periods.js","components/AppointmentForm/AppointmentForm.component.js","redux/period/period.types.js","utils/PeriodType.js","components/PeriodSetter/PeriodSetter.component.js","redux/period/period.actions.js","components/Header/Header.component.js","redux/global-configuration/configuration.types.js","pages/Home/Home.component.js","redux/global-configuration/configuration.actions.js","App.js","reportWebVitals.js","utils/persistor.js","redux/appointment/appointment.utils.js","redux/appointment/appointment.reducer.js","redux/period/period.reducer.js","redux/global-configuration/configuration.reducer.js","redux/root_reducer.js","redux/store.js","index.js"],"names":["ADD_APPOINTMENTS","UPDATED_APPOINTMENT","DELETE_APPOINTMENT","ADD_JOB","UPDATE_JOB","DELETE_JOB","addAppointment","appointment","type","types","payload","updateJob","job","APPOINTMENT_STATE_FIXED","APPOINTMENT_STATE_TO_DO","APPOINTMENT_STATE_COMPLETED","APPOINTMENT_STATE_CURRENT","APPOINTMENT_STATE_LATE","APPOINTMENT_STATE_DELAY","SCHEDULE_WORK_ONLY","SCHEDULE_FREE_TIME","SCHEDULE_FULL","JOB_NOT_STARTED","verifyAppointmentDisponibility","totalHoursNeeded","dueDate","currentAppointments","workStart","workEnd","freeStart","freeEnd","startDate","continuosPeriodPriorization","vacatedWorkPeriods","pickBestContinuosPeriods","getAllVacatedSpacesInPeriodUntilDueDate","currentDistributedHours","getTotalHoursOfPeriods","length","state","periods","currentlyRemainingHours","vacatedFreePeriods","distributedHoursInFreePeriod","mergedPeriods","mergeContinousAppointmentsInDifferentPeriods","console","error","periodStart","periodEnd","appointments","hoursNeeded","getAllPeriods","maxPeriodHours","allContinuousPeriods","currentTimestamp","clone","moment","add","startOf","set","currentPeriondEnd","currentPeriodStart","currentContinuousPeriod","start","end","hours","isSameOrBefore","push","Object","assign","find","isBetween","endDate","undefined","isSameOrAfter","get","mergedAppointment","indexesToIgnore","forEach","index","includes","appointmentToMergeIndex","findIndex","appointmentToCompare","isSame","diff","neededHours","modifiedPeriods","slice","sort","a","b","isBefore","sortPeriodArrayByHoursAndOrder","remainingHours","currentPeriods","currentPeriod","hourDifference","subtract","period","filter","shift","reduce","sum","createPeriodObject","jobId","isRecurrent","id","uuidv4","RangePicker","TimePicker","layout","labelCol","span","wrapperCol","AppointmentForm","props","formRef","React","createRef","isModalVisible","isFutherActionModalVisible","isRecurrentEvent","appointmentPreview","appointmentPeriods","appointmentSuccessful","showTimeToDueDateInputField","showSpecificDateInput","this","setState","values","newJobId","format","recurrentEvent","onCreateRecurrentAppointment","onCreateJob","resetFormState","current","resetFields","description","name","recurrentEndDate","recurrentPeriod","recurrentTimeFrame","weekDay","recurrentEventTime","startHour","endHour","appointmentsToCreate","createAppointmentsOfRecurrentJob","newJob","map","addJob","addAppointments","price","timeFrame","totalHours","finalDate","weekDays","iteratedDay","createdAppointments","isoWeekday","lastChange","inputData","value","continuousPeriod","targetDate","configureTargetDate","verifiedDisponibility","shouldDelay","getFieldsValue","extraAppointments","Math","min","max","finalAppointments","onFormSubmit","_","Promise","reject","resolve","enabledForm","allowFormToBeSubmitted","Fragment","onClick","title","visible","okText","onCancel","bind","onOk","validateFields","then","catch","info","log","okButtonProps","disabled","ref","initialValues","onFinish","onFieldsChange","previewPeriods","Item","label","rules","required","message","valuePropName","onChange","event","target","checked","TextArea","Group","options","compact","noStyle","style","width","showTime","placeholder","Option","className","formatter","replace","parser","precision","validator","validateDueDate","HourglassOutlined","right","QuestionCircleOutlined","footer","onFutherActionSet","icon","FieldTimeOutlined","CoffeeOutlined","Component","connect","jobs","dispatch","SET_WORK_PERIOD","SET_FREE_PERIOD","WORK_PERIOD","FREE_PERIOD","PeriodSetter","periodType","PeriodType","setWorkPeriod","periodRange","setFreePeriod","getPeriodLabel","remember","ownProps","Header","SET_SHOW_SLEEP_PERIOD_CONFIG","HomeComponent","partitionForm","currentDay","toDate","currentViewName","appointmentUpdateInterval","isPartitionModalVisible","partitionAppointmentData","partitionHourValue","isRealocateModalVisible","realocatedState","isAppointmentTooltipVisible","appointmentTooltipMetadata","data","isMergeModalVisible","mergeState","isRecurrentChangeModalVisible","recurrentChangeState","toggleVisibility","onAppointmentMetaChange","onUpdateAppointmentsState","clearTimeout","currentState","checkStateOfAppointment","updateAppointment","timeUntilNextHour","setTimeout","findJobOfAppointment","isAfter","input","isHoursBetween","TimeTableCell","checkStart","checkEnd","periodStartDate","periodEndDate","formatDate","AppointmentContent","height","toFixed","hour","minute","padding","appointmentData","SplitCellsOutlined","Grid","container","alignItems","item","xs","display","justifyContent","Lens","color","marginTop","ExclamationCircleOutlined","fontSize","AccessTime","onCompleteTheAppointment","CheckCircleOutlined","size","onDelayTheAppointment","onFinishTheAppointment","DoubleRightOutlined","updatedListOfAppointments","indexOnList","toCompare","associatedJob","shouldDeleteJob","deleteJob","onUpdateJobStateOnAppointmentChange","allAppointments","jobAppointments","newDistributedPeriods","onConfirmationOfRealocation","directState","newAppointments","indexOfAppointment","appoID","splice","app","deleteAppointment","children","Appointment","targetElement","parentElement","position","deleted","appo","previousStart","previosEnd","change","previewedDeletionAppointments","changed","keys","changedId","newStartDate","newEndDate","collidedAppointmentOfSameJob","collidedAppointment","updatedAppointment","newStart","newEnd","modifiedAppointments","newAppo","newAppointment","merge","parseInt","e","FlexibleSpace","showSleepPeriod","setShowSleepPeriod","Switcher","viewName","Root","isForward","onNaviagateDate","RightOutlined","LeftOutlined","DoubleLeftOutlined","direction","fastForward","specification","findAllAppointmentsOfJobInWeekDay","jobAppo","allJobAppointments","restProps","classes","Paper","locale","currentDate","onCurrentDateChange","date","onCommitChanges","onAppointmentChangeCommited","displayName","cellDuration","intervalCount","startDayHour","calendarViewHourStart","endDayHour","calendarViewHourEnd","timeTableCellComponent","TableTimeCellRenderer","flexibleSpaceComponent","getToolbarFreeSpaceComponent","switcherComponent","getViewSwitcherComponent","rootComponent","getNavigatorRootComponent","navigationButtonComponent","getDateNavigatorComponent","appointmentComponent","getAppointmentComponet","appointmentContentComponent","getCustomAppointmentContent","showCloseButton","showDeleteButton","headerComponent","getHeaderComponent","appointmentMeta","onVisibilityChange","contentComponent","getTooltipContent","allowResize","onAppointmentMerge","onRecurrentAppointmentChange","onAppointmentPartitionSet","validateHourInserted","prefix","suffix","config","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","replacer","toISOString","reviver","match","updateAppointmentOnList","appointmentList","toUpdateAppointment","updatedList","updateJobOnList","jobList","toUpdateJob","toDeleteIDs","deleteJobAndAssociatedAppointments","toDeletejob","updatedJobList","updatedAppointmentList","appointmentOfJobID","indexOnAppointmentList","INITIAL_STATE","history","appointmentReducer","action","periodReducer","configTypes","configurationReducer","persistConfig","key","storage","transforms","createTransform","toDeshydrate","JSON","stringify","toRehydrate","parse","rootReducer","combineReducers","persistReducer","store","createStore","applyMiddleware","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ff3ddc76.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","export const ADD_APPOINTMENTS = 'ADD_APPOINTMENTS';\r\nexport const UPDATED_APPOINTMENT= 'UPDATED_APPOINTMENT';\r\nexport const DELETE_APPOINTMENT = 'DELETE_APPOINTMENT';\r\n\r\nexport const ADD_JOB = 'ADD_JOB';\r\nexport const UPDATE_JOB = 'UPDATE_JOB';\r\nexport const DELETE_JOB = 'DELETE_JOB';\r\n\r\nexport const ADD_TO_HISTORY = 'ADD_TO_HISTORY';","import * as types from './appointment.types';\r\n\r\nexport const addAppointment = appointment => ({\r\n    type: types.ADD_APPOINTMENTS,\r\n    payload: appointment\r\n});\r\n\r\nexport const updateAppointment = appointment => ({\r\n    type: types.UPDATED_APPOINTMENT,\r\n    payload: appointment\r\n})\r\n\r\nexport const deleteAppointment = ids => ({\r\n    type: types.DELETE_APPOINTMENT,\r\n    payload: ids\r\n})\r\n\r\nexport const addJob = job => ({\r\n    type: types.ADD_JOB,\r\n    payload: job\r\n})\r\n\r\nexport const updateJob = job => ({\r\n    type: types.UPDATE_JOB,\r\n    payload: job\r\n})\r\n\r\nexport const deleteJob = job => ({\r\n    type: types.DELETE_JOB,\r\n    payload: job\r\n})\r\n\r\nexport const addToHistory = job => ({\r\n    type: types.ADD_TO_HISTORY,\r\n    payload: job\r\n})\r\n","export const SCHEDULER_DATE_FORMAT = 'YYYY-MM-DDTHH:mm'\r\n\r\nexport const APPOINTMENT_STATE_FIXED = 'APPOINTMENT_STATE_FIXED'\r\nexport const APPOINTMENT_STATE_TO_DO = 'APPOINTMENT_STATE_TO_DO'\r\nexport const APPOINTMENT_STATE_COMPLETED = 'APPOINTMENT_STATE_COMPLETED'\r\nexport const APPOINTMENT_STATE_CURRENT = 'APPOINTMENT_STATE_CURRENT'\r\nexport const APPOINTMENT_STATE_LATE = 'APPOINTMENT_STATE_LATE'\r\nexport const APPOINTMENT_STATE_DELAY = 'APPOINTMENT_STATE_DELAY'\r\n\r\nexport const SCHEDULE_WORK_ONLY = 'SCHEDULE_WORK_ONLY';\r\nexport const SCHEDULE_FREE_TIME = 'SCHEDULE_FREE_TIME';\r\nexport const SCHEDULE_FULL = 'SCHEDULE_FULL';\r\n\r\nexport const JOB_IS_RECURRENT_EVENT = 'JOB_IS_RECURRENT_EVENT';\r\nexport const JOB_NOT_STARTED = 'JOB_NOT_STARTED';\r\nexport const JOB_ON_GOING = 'JOB_ON_GOING';\r\nexport const JOB_COMPLETED = 'JOB_COMPLETED';","import { APPOINTMENT_STATE_FIXED, APPOINTMENT_STATE_TO_DO, SCHEDULE_FREE_TIME, SCHEDULE_FULL, SCHEDULE_WORK_ONLY } from \"./constants\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport moment from 'moment';\r\n\r\nexport function verifyAppointmentDisponibility(totalHoursNeeded, dueDate, currentAppointments, [workStart, workEnd], [freeStart, freeEnd], startDate = null, continuosPeriodPriorization = false) {\r\n    if (!workStart || !workEnd) {\r\n        console.error(\"There was no work period start or end configured!\");\r\n        return;\r\n    }\r\n\r\n    const vacatedWorkPeriods = pickBestContinuosPeriods(getAllVacatedSpacesInPeriodUntilDueDate(\r\n        workStart,\r\n        workEnd,\r\n        dueDate,\r\n        currentAppointments,\r\n        totalHoursNeeded,\r\n        startDate,\r\n        continuosPeriodPriorization\r\n    ), totalHoursNeeded)\r\n\r\n    const currentDistributedHours = getTotalHoursOfPeriods(vacatedWorkPeriods)\r\n\r\n    //If we already allocated all the nescessary time in the work period, finish the function, otherwise allocate to free time\r\n    if (vacatedWorkPeriods.length !== 0 && currentDistributedHours >= totalHoursNeeded) {\r\n        return {\r\n            state: SCHEDULE_WORK_ONLY,\r\n            periods: vacatedWorkPeriods\r\n        }\r\n    }\r\n\r\n    if (!freeStart || !freeEnd) {\r\n        console.error(\"It was nescessary to use free time, but there was no free period start or end configured!\");\r\n        return;\r\n    }\r\n\r\n    const currentlyRemainingHours = totalHoursNeeded - currentDistributedHours;\r\n\r\n    // console.log(currentlyRemainingHours);\r\n\r\n    const vacatedFreePeriods = pickBestContinuosPeriods(getAllVacatedSpacesInPeriodUntilDueDate(\r\n        freeStart,\r\n        freeEnd,\r\n        dueDate,\r\n        currentAppointments,\r\n        currentlyRemainingHours,\r\n        startDate,\r\n        continuosPeriodPriorization\r\n    ), currentlyRemainingHours)\r\n\r\n    // console.log(vacatedFreePeriods);\r\n\r\n    const distributedHoursInFreePeriod = getTotalHoursOfPeriods(vacatedFreePeriods);\r\n    const mergedPeriods = mergeContinousAppointmentsInDifferentPeriods([...vacatedWorkPeriods, ...vacatedFreePeriods])\r\n\r\n    if (vacatedFreePeriods.length !== 0 && currentDistributedHours + distributedHoursInFreePeriod >= totalHoursNeeded) {\r\n        return {\r\n            state: SCHEDULE_FREE_TIME,\r\n            periods: mergedPeriods\r\n        }\r\n    }\r\n\r\n    return {\r\n        state: SCHEDULE_FULL,\r\n        periods: mergedPeriods\r\n    }\r\n}\r\n\r\nexport function getAllVacatedSpacesInPeriodUntilDueDate(periodStart, periodEnd, dueDate, appointments, hoursNeeded, startDate, getAllPeriods = false, maxPeriodHours = 0) {\r\n    const allContinuousPeriods = [];\r\n\r\n    // console.log(\"startDate\", startDate);\r\n    //Start with the period\r\n    let currentTimestamp = startDate ? startDate.clone() : moment().add(1, 'day').startOf('day').set('hour', periodStart);\r\n    //Check if the period end is on the same day as period start, or if the values of the hours wrap up to the next day\r\n    let currentPeriondEnd = periodEnd > periodStart\r\n        ? currentTimestamp.clone().set('hour', periodEnd)\r\n        : currentTimestamp.clone().add(1, 'day').set('hour', periodEnd);\r\n    //The period start is always in the same day, so the above conditional value is not necessary \r\n    let currentPeriodStart = currentTimestamp.clone().set('hour', periodStart)\r\n    // let currentPeriodStart = periodEnd > periodStart\r\n    //     ? currentTimestamp.clone().startOf('day').set('hour', periodStart)\r\n    //     : currentTimestamp.clone().subtract(1, 'day').startOf('day').set('hour', periodStart)\r\n\r\n    let currentContinuousPeriod = {\r\n        start: null,\r\n        end: null,\r\n        hours: 0\r\n    }\r\n\r\n    // console.log(\"periodStar\", currentPeriodStart);\r\n    // console.log(\"periodEnd\", currentPeriondEnd)\r\n\r\n    // console.log('currentTimestamp', currentTimestamp);\r\n    // console.log('dueDate', dueDate.format(\"DD/MM/YYYY HH:mm\"));\r\n\r\n    while (currentTimestamp.isSameOrBefore(dueDate)) {\r\n        // console.log(currentTimestamp.format(\"DD/MM HH:mm\"))\r\n        // console.log('currentContinuousPeriod', Object.assign({}, currentContinuousPeriod))\r\n        /*  Check if the periods already obtained already are enough for the appointment, so theres no \r\n            to continue the while loop*/\r\n        if (maxPeriodHours !== 0 && currentContinuousPeriod.start && currentContinuousPeriod.hours + 1 >= maxPeriodHours) {\r\n\r\n            currentContinuousPeriod.end = currentTimestamp.clone();\r\n            currentContinuousPeriod.hours++;\r\n\r\n            allContinuousPeriods.push(Object.assign({}, currentContinuousPeriod));\r\n            currentContinuousPeriod = {\r\n                start: null,\r\n                end: null,\r\n                hours: 0\r\n            }\r\n        }\r\n\r\n        if (!getAllPeriods && hoursNeeded != 0) {\r\n            if (currentContinuousPeriod.start) {\r\n                if (getTotalHoursOfPeriods([...allContinuousPeriods, { hours: 1 + currentContinuousPeriod.hours }]) >= hoursNeeded) {\r\n\r\n                    // console.log(\"SKipping due to reached hours\");\r\n                    currentContinuousPeriod.end = currentTimestamp.clone();\r\n                    currentContinuousPeriod.hours++;\r\n\r\n                    //Add the finished continuous period to the array.\r\n                    allContinuousPeriods.push(Object.assign({}, currentContinuousPeriod));\r\n\r\n                    currentContinuousPeriod = {\r\n                        start: null,\r\n                        end: null,\r\n                        hours: 0\r\n                    }\r\n                    break;\r\n                }\r\n            } else if (getTotalHoursOfPeriods(allContinuousPeriods) >= hoursNeeded) {\r\n                // console.log(\"SKipping due to total reached hours\");\r\n                break;\r\n            }\r\n        }\r\n\r\n        //Try to find an appointment that contains the current iterated hour.\r\n        const appointment = appointments.find(appointment => {\r\n            //Check if the current timestamp is between this appointment period\r\n            if (currentTimestamp.isBetween(appointment.startDate, appointment.endDate, undefined, \"[)\")) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        })\r\n\r\n        //If there's already an appointment in the current timestamp iterated, skip to the end of the appointment\r\n        if (appointment) {\r\n            // console.log(\"SKipping due to conflicting appointment\");\r\n            //If there's an current period that has been stopped thanks to this appointment, save in the array.\r\n            if (currentContinuousPeriod.start) {\r\n                currentContinuousPeriod.end = currentTimestamp.clone();\r\n                currentContinuousPeriod.hours++;\r\n\r\n                //Add the finished continuous period to the array.\r\n                allContinuousPeriods.push(Object.assign({}, currentContinuousPeriod));\r\n\r\n                currentContinuousPeriod = {\r\n                    start: null,\r\n                    end: null,\r\n                    hours: 0\r\n                }\r\n            }\r\n\r\n            if (appointment.endDate.isSameOrAfter(currentPeriondEnd)) {\r\n                currentPeriondEnd = currentPeriondEnd.add(1, 'day');\r\n                currentPeriodStart = currentPeriodStart.add(1, 'day');\r\n                currentTimestamp = currentPeriodStart.clone();\r\n            } else {\r\n                currentTimestamp = currentTimestamp.set('hour', appointment.endDate.get('hour'));\r\n            }\r\n            continue;\r\n        }\r\n\r\n        //If the current timestamp is beyond or just reached the dueDate\r\n        // console.log('dueDate', dueDate.format('DD/MM HH:mm'))\r\n        // console.log('currentTimestamp', currentTimestamp.format('DD/MM HH:mm'))\r\n        if (currentTimestamp.isSameOrAfter(dueDate)) {\r\n            // console.log(\"SKipping by due date reached\");\r\n            if (currentContinuousPeriod.start) {\r\n                currentContinuousPeriod.end = currentTimestamp.clone();\r\n                currentContinuousPeriod.hours++;\r\n\r\n                allContinuousPeriods.push(Object.assign({}, currentContinuousPeriod));\r\n            }\r\n\r\n            break;\r\n        }\r\n\r\n        //If the current hour is the final hour of the period, end the continuous period\r\n        if (currentTimestamp.isSameOrAfter(currentPeriondEnd)) {\r\n            // console.log(\"SKipping by period end\");\r\n            if (currentContinuousPeriod.start) {\r\n                currentContinuousPeriod.end = currentTimestamp.clone();\r\n                currentContinuousPeriod.hours++;\r\n\r\n                //Add the finished continuous period to the array.\r\n                allContinuousPeriods.push(Object.assign({}, currentContinuousPeriod));\r\n\r\n                currentContinuousPeriod = {\r\n                    start: null,\r\n                    end: null,\r\n                    hours: 0\r\n                }\r\n            }\r\n\r\n            currentPeriondEnd = currentPeriondEnd.add(1, 'day');\r\n            currentPeriodStart = currentPeriodStart.add(1, 'day');\r\n            currentTimestamp = currentPeriodStart.clone();\r\n            continue;\r\n        }\r\n\r\n\r\n        //If there's no appointment, this is a free hour to add to the current continuous period\r\n        if (currentContinuousPeriod.start) {\r\n            currentContinuousPeriod.end = currentTimestamp.clone();\r\n            currentContinuousPeriod.hours++;\r\n        } else {\r\n            currentContinuousPeriod.start = currentTimestamp.clone();\r\n        }\r\n\r\n        currentTimestamp = currentTimestamp.add(1, 'hour');\r\n        // console.log(\"Reached the end of loop\")\r\n    }\r\n\r\n    return allContinuousPeriods;\r\n}\r\n\r\nexport function mergeContinousAppointmentsInDifferentPeriods(appointments) {\r\n    const mergedAppointment = [];\r\n    const indexesToIgnore = [];\r\n\r\n    appointments.forEach((appointment, index) => {\r\n        if (indexesToIgnore.includes(index)) {\r\n            return;\r\n        }\r\n\r\n        const appointmentToMergeIndex = appointments.findIndex(appointmentToCompare => appointment.end.isSame(appointmentToCompare.start));\r\n        if (appointmentToMergeIndex !== -1) {\r\n            indexesToIgnore.push(appointmentToMergeIndex);\r\n\r\n            appointment.end = appointments[appointmentToMergeIndex].end;\r\n            appointment.hours = appointment.end.diff(appointment.start, 'hours');\r\n        }\r\n\r\n        mergedAppointment.push(appointment);\r\n    })\r\n\r\n    return mergedAppointment;\r\n}\r\n\r\nexport function pickBestContinuosPeriods(periods, neededHours) {\r\n    //If the periods are not, or just barely, enough to contain the event, just return the array as it is\r\n    if (getTotalHoursOfPeriods(periods) <= neededHours) {\r\n        return periods;\r\n    }\r\n\r\n    let modifiedPeriods = periods.slice();\r\n    //Sort the periods by hours and then by earliest\r\n    modifiedPeriods = modifiedPeriods.sort((a, b) => sortPeriodArrayByHoursAndOrder(a, b, neededHours))\r\n\r\n    let remainingHours = neededHours;\r\n    const currentPeriods = []\r\n\r\n    while (remainingHours > 0) {\r\n        const currentPeriod = modifiedPeriods[0];\r\n\r\n        if (currentPeriod.hours === remainingHours) {\r\n            currentPeriods.push(currentPeriod);\r\n            break;\r\n        }\r\n\r\n        if (currentPeriod.hours > remainingHours) {\r\n            const hourDifference = currentPeriod.hours - remainingHours;\r\n\r\n            currentPeriod.hours = currentPeriod.hours - hourDifference;\r\n            currentPeriod.end = currentPeriod.end.subtract(hourDifference, 'hours');\r\n            currentPeriods.push(currentPeriod)\r\n\r\n            break;\r\n        }\r\n\r\n        currentPeriods.push(currentPeriod);\r\n        remainingHours -= currentPeriod.hours;\r\n\r\n        //Search if there is any period with less hours that could hold the remaining time and is sooner\r\n        if (modifiedPeriods.find(period => period.hours >= remainingHours && period.start.isBefore(currentPeriod.start))) {\r\n            modifiedPeriods = modifiedPeriods.filter(period => period.hours !== currentPeriod.hours);\r\n        } else {\r\n            modifiedPeriods.shift();\r\n        }\r\n    }\r\n\r\n    return currentPeriods;\r\n}\r\n\r\nexport function sortPeriodArrayByHoursAndOrder(a, b, neededHours) {\r\n    return (a.hours > b.hours || a.hours === neededHours)\r\n        ? -1\r\n        : (b.hours > a.hours || b.hours === neededHours)\r\n            ? 1\r\n            : a.start.isBefore(b.start)\r\n                ? -1\r\n                : b.start.isBefore(a.start)\r\n                    ? 1\r\n                    : 0\r\n}\r\n\r\nexport function getTotalHoursOfPeriods(periods) {\r\n    return periods.reduce((sum, period) => ({ hours: sum.hours + period.hours }), { hours: 0 }).hours;\r\n}\r\n\r\nexport function createPeriodObject({ start, end, hours }, jobId, isRecurrent = false) {\r\n    return {\r\n        startDate: start,\r\n        endDate: end,\r\n        state: isRecurrent ? APPOINTMENT_STATE_FIXED : APPOINTMENT_STATE_TO_DO,\r\n        hours: hours,\r\n        id: 'job_' + jobId + '_app_' + uuidv4(),\r\n        jobId: jobId\r\n    }\r\n}\r\n","import { Input, Form, Modal, InputNumber, DatePicker, Button, Checkbox, Tooltip, Select, TimePicker, Space } from 'antd';\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addAppointment, addJob } from '../../redux/appointment/appointment.actions';\r\nimport moment from 'moment';\r\n\r\nimport './AppointmentForm.styles.scss';\r\nimport { JOB_IS_RECURRENT_EVENT, JOB_NOT_STARTED, SCHEDULE_FREE_TIME, SCHEDULE_FULL, SCHEDULE_WORK_ONLY } from '../../utils/constants';\r\nimport { CoffeeOutlined, FieldTimeOutlined, HourglassOutlined, QuestionCircleOutlined } from '@ant-design/icons';\r\nimport { createPeriodObject, getAllVacatedSpacesInPeriodUntilDueDate, getTotalHoursOfPeriods, mergeContinousAppointmentsInDifferentPeriods, verifyAppointmentDisponibility } from '../../utils/periods';\r\n\r\nconst { RangePicker } = TimePicker;\r\n\r\nconst layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 },\r\n};\r\n\r\nclass AppointmentForm extends React.Component {\r\n    formRef = React.createRef();\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isModalVisible: false,\r\n            isFutherActionModalVisible: false,\r\n            isRecurrentEvent: false,\r\n            appointmentPreview: null,\r\n            appointmentPeriods: [],\r\n            appointmentSuccessful: false,\r\n            showTimeToDueDateInputField: false,\r\n            showSpecificDateInput: false,\r\n        }\r\n    }\r\n\r\n    resetFormState() {\r\n        this.setState({\r\n            isModalVisible: false,\r\n            isFutherActionModalVisible: false,\r\n            isRecurrentEvent: false,\r\n            appointmentPreview: null,\r\n            appointmentPeriods: [],\r\n            appointmentSuccessful: false,\r\n            showTimeToDueDateInputField: false,\r\n            showSpecificDateInput: false,\r\n        })\r\n    }\r\n\r\n    onFormSubmit(values) {\r\n        const newJobId = moment().format('x');\r\n\r\n        if (values.recurrentEvent) {\r\n            this.onCreateRecurrentAppointment(newJobId, values);\r\n        } else {\r\n            this.onCreateJob(newJobId, values);\r\n        }\r\n\r\n        this.resetFormState();\r\n        this.formRef.current.resetFields();\r\n    }\r\n\r\n    onCreateRecurrentAppointment(newJobId, { description, name, recurrentEndDate, recurrentPeriod, recurrentTimeFrame, weekDay, recurrentEventTime }) {\r\n        const startHour = recurrentEventTime[0].get('hour');\r\n        const endHour = recurrentEventTime[1].get('hour');\r\n        const endDate = recurrentTimeFrame === 'date'\r\n            ? recurrentEndDate\r\n            : moment().startOf('day').add(recurrentPeriod, recurrentTimeFrame).set('hour', endHour)\r\n        const appointmentsToCreate = this.createAppointmentsOfRecurrentJob(startHour, endHour, endDate, weekDay, newJobId)\r\n\r\n        const newJob = {\r\n            id: newJobId,\r\n            name: name,\r\n            appointments: appointmentsToCreate.map(appointment => appointment.id),\r\n            description: description,\r\n            dueDate: endDate,\r\n            state: JOB_IS_RECURRENT_EVENT,\r\n            recurrentEvent: true,\r\n            weekDay\r\n        }\r\n\r\n        this.props.addJob(newJob);\r\n        this.props.addAppointments(appointmentsToCreate);\r\n    }\r\n\r\n    onCreateJob(newJobId, values) {\r\n        const appointmentsToCreate = this.state.appointmentPeriods.map((period) => createPeriodObject(period, newJobId))\r\n\r\n        const newJob = {\r\n            id: newJobId,\r\n            name: values.name,\r\n            appointments: appointmentsToCreate.map(appointment => appointment.id),\r\n            price: values.price,\r\n            description: values.description,\r\n            dueDate: values.dueDate\r\n                ? values.dueDate.startOf('hour')\r\n                : values.period && values.timeFrame\r\n                    ? moment().add(values.period, values.timeFrame).startOf('hour')\r\n                    : null,\r\n            totalHours: values.hours,\r\n            state: JOB_NOT_STARTED,\r\n            recurrentEvent: false\r\n        }\r\n\r\n        this.props.addJob(newJob);\r\n        this.props.addAppointments(appointmentsToCreate);\r\n    }\r\n\r\n    createAppointmentsOfRecurrentJob(startHour, endHour, finalDate, weekDays, jobId) {\r\n        const iteratedDay = moment().startOf('day');\r\n        const createdAppointments = [];\r\n\r\n        while (iteratedDay.isSameOrBefore(finalDate)) {\r\n            if (weekDays.includes(iteratedDay.isoWeekday())) {\r\n                createdAppointments.push(createPeriodObject(\r\n                    {\r\n                        start: iteratedDay.clone().set('hour', startHour),\r\n                        end: iteratedDay.clone().set('hour', endHour),\r\n                        hours: endHour - startHour\r\n                    },\r\n                    jobId,\r\n                    true\r\n                ))\r\n            }\r\n\r\n            iteratedDay.add(1, 'day');\r\n        }\r\n\r\n        return createdAppointments;\r\n    }\r\n\r\n    previewPeriods([lastChange], values) {\r\n        const recurrentEvent = values.find(inputData => inputData.name.includes('recurrentEvent'));\r\n        //No need to set the appointments preview to an recurrent event\r\n        if (recurrentEvent.value) {\r\n            return;\r\n        }\r\n\r\n        const hours = values.find(inputData => inputData.name.includes('hours'));\r\n        const continuousPeriod = values.find(inputData => inputData.name.includes('continuousPeriod'));\r\n        const dueDate = values.find(inputData => inputData.name.includes('dueDate'));\r\n        const timeFrame = values.find(inputData => inputData.name.includes('timeFrame'));\r\n        const period = values.find(inputData => inputData.name.includes('period'));\r\n\r\n        const { appointments, workStart, workEnd, freeStart, freeEnd } = this.props;\r\n        if (lastChange.name.includes('hours') || lastChange.name.includes('dueDate') || lastChange.name.includes('continuousPeriod') || lastChange.name.includes('timeFrame') || lastChange.name.includes('period')) {\r\n\r\n            const targetDate = this.configureTargetDate(dueDate, timeFrame, period);\r\n\r\n            if (hours.value && targetDate) {\r\n                const verifiedDisponibility = verifyAppointmentDisponibility(hours.value, targetDate, appointments, [workStart, workEnd], [freeStart, freeEnd], null, continuousPeriod.value);\r\n\r\n                if (!verifiedDisponibility) {\r\n                    console.error(\"Error on saving the periods\")\r\n                    return;\r\n                }\r\n\r\n                switch (verifiedDisponibility.state) {\r\n                    case SCHEDULE_WORK_ONLY:\r\n                        this.setState({\r\n                            appointmentPreview: 'The job can be sucessfully distributed in the work period',\r\n                            appointmentPeriods: verifiedDisponibility.periods,\r\n                            appointmentSuccessful: true\r\n                        })\r\n                        break;\r\n                    case SCHEDULE_FREE_TIME:\r\n                        this.setState({\r\n                            appointmentPreview: 'The job will invade some of your free time period',\r\n                            appointmentPeriods: verifiedDisponibility.periods,\r\n                            appointmentSuccessful: true\r\n                        })\r\n                        break;\r\n                    case SCHEDULE_FULL:\r\n                        this.setState({\r\n                            appointmentPreview: 'The job could not be distributed into your work/free time, further action will be required on submit',\r\n                            appointmentPeriods: verifiedDisponibility.periods,\r\n                            appointmentSuccessful: false\r\n                        })\r\n                        break;\r\n                }\r\n            } else {\r\n                this.setState({\r\n                    appointmentPreview: '',\r\n                    appointmentPeriods: []\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    configureTargetDate(dueDate, period, timeFrame) {\r\n        return dueDate && dueDate.value\r\n            ? dueDate.value.startOf('hour')\r\n            : period && period.value && timeFrame && timeFrame.value\r\n                ? moment().add(period.value, timeFrame.value).startOf('hour')\r\n                : null;\r\n    }\r\n\r\n    onFutherActionSet(shouldDelay) {\r\n        const { appointments, workStart, workEnd, freeStart, freeEnd } = this.props;\r\n        const { dueDate, hours, continuousPeriod } = this.formRef.current.getFieldsValue();\r\n\r\n        const extraAppointments = getAllVacatedSpacesInPeriodUntilDueDate(\r\n            shouldDelay ? Math.min(workStart, freeStart) : Math.max(workEnd, freeEnd),\r\n            shouldDelay ? Math.max(workEnd, freeEnd) : Math.min(workStart, freeStart),\r\n            shouldDelay ? dueDate.set('year', 9999).startOf('hour') : dueDate.startOf('hour'),\r\n            [...appointments, ...this.state.appointmentPeriods],\r\n            hours - getTotalHoursOfPeriods(this.state.appointmentPeriods),\r\n            shouldDelay ? dueDate.startOf('hour') : moment().startOf('day').set('hour', Math.max(workEnd, freeEnd)),\r\n            continuousPeriod\r\n        )\r\n\r\n        const finalAppointments = mergeContinousAppointmentsInDifferentPeriods([...extraAppointments, ...this.state.appointmentPeriods]);\r\n\r\n        this.setState({\r\n            appointmentPeriods: finalAppointments,\r\n            appointmentSuccessful: true,\r\n            appointmentPreview: '',\r\n            isModalVisible: false,\r\n            isFutherActionModalVisible: false\r\n        }, () => this.onFormSubmit(this.formRef.current.getFieldsValue()))\r\n    }\r\n\r\n    allowFormToBeSubmitted() {\r\n        const { workStart, workEnd, freeStart, freeEnd } = this.props;\r\n        if (workStart && workEnd && freeStart && freeEnd) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    validateDueDate(_, dueDate) {\r\n        if (moment().isSameOrAfter(dueDate)) {\r\n            return Promise.reject('The due date needs to be after now!')\r\n        }\r\n\r\n        return Promise.resolve();\r\n    }\r\n\r\n    render() {\r\n        const enabledForm = this.allowFormToBeSubmitted();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Button type=\"primary\" onClick={() => this.setState({ isModalVisible: true })}>Add Event</Button>\r\n\r\n                <Modal title=\"Add Event\"\r\n                    visible={this.state.isModalVisible}\r\n                    okText={\"Submit\"}\r\n                    onCancel={this.resetFormState.bind(this)}\r\n                    onOk={() => {\r\n                        this.formRef.current.validateFields()\r\n                            .then(values => {\r\n                                if (this.state.appointmentSuccessful || this.state.isRecurrentEvent) {\r\n                                    this.onFormSubmit(values);\r\n                                } else {\r\n                                    this.setState({ isFutherActionModalVisible: true })\r\n                                }\r\n                            })\r\n                            .catch(info => {\r\n                                console.log('Validate Failed:', info);\r\n                            });\r\n                    }}\r\n                    okButtonProps={{ disabled: !enabledForm }}\r\n                >\r\n\r\n                    <Form\r\n                        {...layout}\r\n                        ref={this.formRef}\r\n                        name=\"eventForm\"\r\n                        initialValues={{ continuousPeriod: false }}\r\n                        onFinish={(values) => this.onFormSubmit(values)}\r\n                        onFieldsChange={this.previewPeriods.bind(this)}\r\n\r\n                    >\r\n                        <Form.Item\r\n                            label=\"Name\"\r\n                            name=\"name\"\r\n                            rules={[{ required: true, message: 'The event name is required' }]}\r\n                        >\r\n                            <Input disabled={!enabledForm} />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            label=\"Recurrent Event\"\r\n                            name=\"recurrentEvent\"\r\n                            valuePropName='checked'\r\n                        >\r\n                            <Checkbox disabled={!enabledForm} onChange={(event) => this.setState({ isRecurrentEvent: event.target.checked })}></Checkbox>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            label=\"Description\"\r\n                            name=\"description\"\r\n                        >\r\n                            <Input.TextArea disabled={!enabledForm} />\r\n                        </Form.Item>\r\n\r\n                        {\r\n                            this.state.isRecurrentEvent\r\n                                ?\r\n                                <React.Fragment>\r\n                                    <Form.Item\r\n                                        label=\"Time\"\r\n                                        name=\"recurrentEventTime\"\r\n                                        rules={[{ required: true, message: 'The recurrent event time range is required!' }]}\r\n                                    >\r\n                                        <RangePicker format={\"HH:00\"} />\r\n                                    </Form.Item>\r\n\r\n                                    <Form.Item\r\n                                        label=\"Week Days\"\r\n                                        name=\"weekDay\"\r\n                                        rules={[{ required: true, message: 'At least one day must be selected for the event to happen!' }]}>\r\n                                        <Checkbox.Group\r\n                                            options={[\r\n                                                { label: 'Monday', value: 1 },\r\n                                                { label: 'Tuesday', value: 2 },\r\n                                                { label: 'Wednesday', value: 3 },\r\n                                                { label: 'Thursday', value: 4 },\r\n                                                { label: 'Friday', value: 5 },\r\n                                                { label: 'Saturday', value: 6 },\r\n                                                { label: 'Sunday', value: 7 }\r\n                                            ]}\r\n                                        />\r\n                                    </Form.Item>\r\n\r\n                                    <Form.Item\r\n                                        label=\"Recurrency Duration\">\r\n                                        <Input.Group compact>\r\n                                            {\r\n                                                this.state.showSpecificDateInput\r\n                                                    ?\r\n                                                    <Form.Item\r\n                                                        name={'recurrentEndDate'}\r\n                                                        noStyle\r\n                                                        rules={[{ required: true, message: 'The period value is required' }]}\r\n                                                    >\r\n                                                        <DatePicker disabled={!enabledForm} style={{ width: '50%' }} format={'DD/MM/YYYY HH:00'} showTime />\r\n                                                    </Form.Item>\r\n                                                    :\r\n                                                    <Form.Item\r\n                                                        name={'recurrentPeriod'}\r\n                                                        noStyle\r\n                                                        rules={[{ required: true, message: 'The period value is required' }]}\r\n                                                    >\r\n                                                        <InputNumber disabled={!enabledForm} style={{ width: '50%' }} placeholder=\"Period value\" />\r\n                                                    </Form.Item>\r\n                                            }\r\n                                            <Form.Item\r\n                                                name={'recurrentTimeFrame'}\r\n                                                noStyle\r\n                                                rules={[{ required: true, message: 'Please select the time frame to be used' }]}\r\n                                            >\r\n                                                <Select\r\n                                                    style={{ width: '50%' }}\r\n                                                    disabled={!enabledForm}\r\n                                                    placeholder=\"Time frame\"\r\n                                                    onChange={(value) => this.setState({ showSpecificDateInput: value === 'date' })}>\r\n                                                    <Select.Option value=\"week\">Week(s)</Select.Option>\r\n                                                    <Select.Option value=\"month\">Month(s)</Select.Option>\r\n                                                    <Select.Option value=\"quarter\">Quarter(s)</Select.Option>\r\n                                                    <Select.Option value=\"year\">Year(s)</Select.Option>\r\n                                                    <Select.Option value=\"date\">Specifc Date</Select.Option>\r\n                                                </Select>\r\n                                            </Form.Item>\r\n                                        </Input.Group>\r\n                                    </Form.Item>\r\n\r\n                                    <span className=\"message\">\r\n                                        The recurrent events will ignore jobs appointments when setting the event, so there may be some overlaps to be fixed manually\r\n                                    </span>\r\n\r\n                                </React.Fragment>\r\n                                :\r\n                                <React.Fragment>\r\n                                    <Form.Item\r\n                                        label=\"Price\"\r\n                                        name=\"price\"\r\n                                    >\r\n                                        <InputNumber\r\n                                            formatter={price => `$ ${price}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\r\n                                            parser={price => price.replace(/\\$\\s?|(,*)/g, '')}\r\n                                            min={0}\r\n                                            precision={2}\r\n                                            disabled={!enabledForm}\r\n                                        />\r\n                                    </Form.Item>\r\n\r\n                                    <Form.Item\r\n                                        label=\"Estimated Hours\"\r\n                                        name=\"hours\"\r\n                                        rules={[{ required: true, message: 'The ETA is required to allow the scheduler to distribute time' }]}\r\n                                    >\r\n                                        <InputNumber\r\n                                            disabled={!enabledForm}\r\n                                            min={0} />\r\n                                    </Form.Item>\r\n\r\n                                    <div className=\"due-date-wrapper\">\r\n                                        {\r\n                                            !this.state.showTimeToDueDateInputField\r\n                                                ?\r\n                                                <Form.Item\r\n                                                    label=\"Due Date\"\r\n                                                    name=\"dueDate\"\r\n                                                    rules={[{ required: true, message: 'The dude date is required' }, { validator: this.validateDueDate }]}\r\n                                                >\r\n                                                    <DatePicker disabled={!enabledForm} format={'DD/MM/YYYY HH:00'} showTime />\r\n                                                </Form.Item >\r\n                                                :\r\n                                                <Form.Item\r\n                                                    label=\"Time to Due Date\"\r\n                                                >\r\n                                                    <Input.Group compact>\r\n                                                        <Form.Item\r\n                                                            name={['timeFrame']}\r\n                                                            noStyle\r\n                                                            rules={[{ required: true, message: 'Please select the time frame to be used' }]}\r\n                                                        >\r\n                                                            <Select placeholder=\"Time frame\">\r\n                                                                <Select.Option value=\"hour\">Hour(s)</Select.Option>\r\n                                                                <Select.Option value=\"day\">Day(s)</Select.Option>\r\n                                                            </Select>\r\n                                                        </Form.Item>\r\n                                                        <Form.Item\r\n                                                            name={['period']}\r\n                                                            noStyle\r\n                                                            rules={[{ required: true, message: 'The period value is required' }]}\r\n                                                        >\r\n                                                            <InputNumber style={{ width: '50%' }} placeholder=\"Period hours/days\" />\r\n                                                        </Form.Item>\r\n                                                    </Input.Group>\r\n                                                </Form.Item >\r\n                                        }\r\n\r\n                                        <Tooltip title=\"Change to the 'Time to due Date' input that allows you to insert the time to the due date instead of the specific date\">\r\n                                            <HourglassOutlined\r\n                                                className=\"due-date-toogle\"\r\n                                                style={{ right: this.state.showTimeToDueDateInputField ? '20px' : '80px' }}\r\n                                                onClick={() => this.setState({ showTimeToDueDateInputField: !this.state.showTimeToDueDateInputField })} />\r\n                                        </Tooltip>\r\n                                    </div>\r\n\r\n                                    <Form.Item label=\"Continuous Priority\">\r\n                                        <Space className=\"continuous-space\">\r\n                                            <Form.Item\r\n                                                valuePropName='checked'\r\n                                                name=\"continuousPeriod\">\r\n                                                <Checkbox disabled={!enabledForm} />\r\n                                            </Form.Item>\r\n                                            <Tooltip title=\"Whether the Scheduler should focus on finding continuous periods or just distribute the event in the open periods avaliable\">\r\n                                                <QuestionCircleOutlined />\r\n                                            </Tooltip>\r\n                                        </Space>\r\n                                    </Form.Item>\r\n                                </React.Fragment>\r\n                        }\r\n\r\n                        <span className=\"message\">{this.state.appointmentPreview}</span>\r\n                        {\r\n                            !enabledForm ?\r\n                                <span className=\"message\">\r\n                                    Please set the work and free period before attemping to add events to your schedule\r\n                                </span> : null\r\n                        }\r\n\r\n                    </Form>\r\n\r\n                </Modal>\r\n\r\n                <Modal\r\n                    visible={this.state.isFutherActionModalVisible}\r\n                    footer={[\r\n                        <Tooltip key=\"delay\" title=\"Delay\">\r\n                            <Button type=\"primary\" onClick={() => this.onFutherActionSet(true)} icon={<FieldTimeOutlined />}></Button>\r\n                        </Tooltip>,\r\n                        <Tooltip key=\"overwrite_sleep\" title=\"Overwrite Sleep\">\r\n                            <Button type=\"primary\" onClick={() => this.onFutherActionSet(false)} icon={<CoffeeOutlined />}></Button>\r\n                        </Tooltip>,\r\n                        <Button key=\"back\" onClick={() => this.setState({ isFutherActionModalVisible: false })}>\r\n                            Cancel\r\n                        </Button>\r\n                    ]}>\r\n                    <p>The appointment submitted can't be concluded during your work and free period, what should the scheduler do to allow for this job to be scheduled?</p>\r\n                </Modal>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    workStart: state.period.workStart,\r\n    workEnd: state.period.workEnd,\r\n    freeStart: state.period.freeStart,\r\n    freeEnd: state.period.freeEnd,\r\n    appointments: state.appointment.appointments,\r\n    jobs: state.appointment.jobs\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        addAppointments: (payload) => dispatch(addAppointment(payload)),\r\n        addJob: (payload) => dispatch(addJob(payload))\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppointmentForm);","export const SET_WORK_PERIOD = 'SET_WORK_PERIOD';\r\nexport const SET_FREE_PERIOD = 'SET_FREE_PERIOD';","export const WORK_PERIOD = 'WORK_PERIOD';\r\nexport const FREE_PERIOD = 'FREE_PERIOD';\r\nexport const SLEEP_PERIOD = 'SLEEP_PERIOD';","import { Button, Form, Modal, TimePicker } from 'antd';\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setFreePeriod, setWorkPeriod } from '../../redux/period/period.actions';\r\nimport * as PeriodType from '../../utils/PeriodType';\r\nimport moment from 'moment';\r\n\r\nimport './PeriodSetter.styles.scss';\r\n\r\nconst { RangePicker } = TimePicker;\r\n\r\nclass PeriodSetter extends React.Component {\r\n    formRef = React.createRef();\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isModalVisible: false\r\n        }\r\n    }\r\n\r\n    onFormSubmit(values) {\r\n        switch (this.props.periodType) {\r\n            case PeriodType.WORK_PERIOD:\r\n                this.props.setWorkPeriod({ start: values.periodRange[0].get('hours'), end: values.periodRange[1].get('hours') })\r\n                break;\r\n            case PeriodType.FREE_PERIOD:\r\n                this.props.setFreePeriod({ start: values.periodRange[0].get('hours'), end: values.periodRange[1].get('hours') })\r\n                break;\r\n        }\r\n\r\n        this.setState({ isModalVisible: false})\r\n    }\r\n\r\n    getPeriodLabel(periodType) {\r\n        switch (periodType) {\r\n            case PeriodType.FREE_PERIOD:\r\n                return 'Free';\r\n            case PeriodType.WORK_PERIOD:\r\n                return 'Work';\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Button onClick={() => this.setState({ isModalVisible: true })}>{this.getPeriodLabel(this.props.periodType)} Period</Button>\r\n\r\n                <Modal\r\n                    title={`${this.getPeriodLabel(this.props.periodType)} Period`}\r\n                    visible={this.state.isModalVisible}\r\n                    okText={\"Submit\"}\r\n                    onCancel={() => this.setState({ isModalVisible: false })}\r\n                    onOk={() => {\r\n                        this.formRef.current.validateFields()\r\n                            .then(values => {\r\n                                this.onFormSubmit(values);\r\n                            })\r\n                            .catch(info => {\r\n                                console.log('Validate Failed:', info);\r\n                            });\r\n                    }}\r\n                >\r\n                    <Form\r\n                        ref={this.formRef}\r\n                        name=\"periodForm\"\r\n                        initialValues={{\r\n                            periodRange: [\r\n                                moment().startOf('day').set('hours', this.props.start),\r\n                                moment().startOf('day').set('hours', this.props.end)\r\n                            ],\r\n                            remember: true\r\n                        }}\r\n                        onFinish={(values) => this.onFormSubmit(values)}\r\n                    >\r\n                        <Form.Item\r\n                            name=\"periodRange\"\r\n                            rules={[{ required: true, message: 'The range of the period is required!' }]}\r\n                        >\r\n                            <RangePicker format={\"HH:00\"} />\r\n                        </Form.Item>\r\n                    </Form>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    switch (ownProps.periodType) {\r\n        case PeriodType.WORK_PERIOD:\r\n            return {\r\n                start: state.period.workStart,\r\n                end: state.period.workEnd\r\n            }\r\n        case PeriodType.FREE_PERIOD:\r\n            return {\r\n                start: state.period.freeStart,\r\n                end: state.period.freeEnd\r\n            }\r\n        default:\r\n            return {\r\n\r\n            }\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setWorkPeriod: (payload) => dispatch(setWorkPeriod(payload)),\r\n        setFreePeriod: (payload) => dispatch(setFreePeriod(payload))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PeriodSetter);","import * as types from './period.types';\r\n\r\nexport const setWorkPeriod = timeRange => ({\r\n    type: types.SET_WORK_PERIOD,\r\n    payload: timeRange\r\n});\r\n\r\nexport const setFreePeriod = timeRange => ({\r\n    type: types.SET_FREE_PERIOD,\r\n    payload: timeRange\r\n});","import React from 'react';\r\nimport AppointmentForm from '../AppointmentForm/AppointmentForm.component';\r\nimport PeriodSetter from '../PeriodSetter/PeriodSetter.component';\r\nimport * as PeriodType from '../../utils/PeriodType';\r\n\r\nimport './Header.styles.scss';\r\n\r\nexport class Header extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n    }\r\n\r\n    onFormSubmit() {\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <header>\r\n                <h2>Work Scheduler</h2>\r\n\r\n                <div className=\"button-group\">\r\n                    <PeriodSetter periodType={PeriodType.WORK_PERIOD} />\r\n                    <PeriodSetter periodType={PeriodType.FREE_PERIOD} />\r\n\r\n                    <AppointmentForm />\r\n                </div>\r\n            </header>\r\n        )\r\n    }\r\n}","export const SET_SHOW_SLEEP_PERIOD_CONFIG = 'SET_SHOW_SLEEP_PERIOD_CONFIG';","import React from 'react';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { EditingState, IntegratedEditing, ViewState } from '@devexpress/dx-react-scheduler';\r\nimport {\r\n    Scheduler,\r\n    DayView,\r\n    Appointments,\r\n    Toolbar,\r\n    ViewSwitcher,\r\n    MonthView,\r\n    AppointmentTooltip,\r\n    DateNavigator,\r\n    ConfirmationDialog,\r\n    DragDropProvider\r\n} from '@devexpress/dx-react-scheduler-material-ui';\r\nimport { Header } from '../../components/Header/Header.component';\r\nimport { connect } from 'react-redux';\r\nimport moment from 'moment';\r\nimport { APPOINTMENT_STATE_COMPLETED, APPOINTMENT_STATE_CURRENT, APPOINTMENT_STATE_DELAY, APPOINTMENT_STATE_FIXED, APPOINTMENT_STATE_LATE, APPOINTMENT_STATE_TO_DO, JOB_COMPLETED, JOB_NOT_STARTED, JOB_ON_GOING, SCHEDULE_FREE_TIME, SCHEDULE_FULL } from '../../utils/constants';\r\nimport { FieldTimeOutlined, DoubleRightOutlined, CheckCircleOutlined, ExclamationCircleOutlined, DoubleLeftOutlined, LeftOutlined, RightOutlined, SplitCellsOutlined } from '@ant-design/icons';\r\nimport { addAppointment, deleteAppointment, deleteJob, updateAppointment, updateJob } from '../../redux/appointment/appointment.actions';\r\nimport { createPeriodObject, getAllVacatedSpacesInPeriodUntilDueDate, verifyAppointmentDisponibility } from '../../utils/periods';\r\nimport { Button, Form, Input } from 'antd';\r\n\r\nimport './Home.styles.scss';\r\nimport { Button as MaterialButton, Grid } from '@material-ui/core';\r\nimport { AccessTime, Lens } from '@material-ui/icons';\r\nimport Modal from 'antd/lib/modal/Modal';\r\nimport Checkbox from 'antd/lib/checkbox/Checkbox';\r\nimport { setShowSleepConfiguration } from '../../redux/global-configuration/configuration.actions';\r\n\r\nclass HomeComponent extends React.Component {\r\n    partitionForm = React.createRef();\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            currentDay: moment().startOf('week').toDate(),\r\n            currentViewName: 'Day',\r\n            appointmentUpdateInterval: null,\r\n            isPartitionModalVisible: false,\r\n            partitionAppointmentData: null,\r\n            partitionHourValue: '',\r\n            isRealocateModalVisible: false,\r\n            realocatedState: {\r\n                state: '',\r\n                periods: [],\r\n                appointment: null,\r\n                job: null\r\n            },\r\n            isAppointmentTooltipVisible: false,\r\n            appointmentTooltipMetadata: {\r\n                target: null,\r\n                data: {},\r\n            },\r\n            isMergeModalVisible: false,\r\n            mergeState: null,\r\n            isRecurrentChangeModalVisible: false,\r\n            recurrentChangeState: null\r\n        }\r\n\r\n        this.toggleVisibility = () => {\r\n            this.setState({ isAppointmentTooltipVisible: !this.state.isAppointmentTooltipVisible });\r\n        };\r\n\r\n        this.onAppointmentMetaChange = ({ data, target } = { data: {}, target: null }) => {\r\n            this.setState({ appointmentTooltipMetadata: { data, target } });\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.onUpdateAppointmentsState();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.state.appointmentUpdateInterval) {\r\n            clearTimeout(this.state.appointmentUpdateInterval)\r\n            this.setState({ appointmentUpdateInterval: null })\r\n        }\r\n    }\r\n\r\n    onUpdateAppointmentsState() {\r\n        const { appointments } = this.props;\r\n\r\n        appointments.forEach(appointment => {\r\n            const currentState = this.checkStateOfAppointment(appointment)\r\n            if (appointment.state !== currentState) {\r\n\r\n                console.log(\"New state\" + currentState + \"for appoitnment\" + appointment.id);\r\n\r\n                appointment.state = currentState;\r\n\r\n                this.props.updateAppointment(appointment);\r\n            }\r\n        })\r\n\r\n        const timeUntilNextHour = moment().add(1, 'hour').startOf('hour').add(1, 'second').diff(moment(), 'milliseconds');\r\n\r\n        this.setState({\r\n            appointmentUpdateInterval: setTimeout(() => this.onUpdateAppointmentsState(), timeUntilNextHour)\r\n        })\r\n    }\r\n\r\n    checkStateOfAppointment(appointment) {\r\n        //Once completed, the state is not supposed to be changed anymore\r\n        if (appointment.state === APPOINTMENT_STATE_COMPLETED) {\r\n            return APPOINTMENT_STATE_COMPLETED;\r\n        }\r\n\r\n        //Fixed appointments are not supposed to change in any circustance\r\n        if (appointment.state === APPOINTMENT_STATE_FIXED) {\r\n            return APPOINTMENT_STATE_FIXED;\r\n        }\r\n\r\n        const job = this.findJobOfAppointment(appointment);\r\n        if (appointment.startDate.isAfter(job.dueDate)) {\r\n            return APPOINTMENT_STATE_DELAY\r\n        }\r\n\r\n        //If the appointment has ended before the current date, then it's late\r\n        if (appointment.endDate.isBefore(moment())) {\r\n            return APPOINTMENT_STATE_LATE;\r\n        }\r\n\r\n        //If the appointment start is later than now, then it is still to do\r\n        if (appointment.startDate.isAfter(moment())) {\r\n            return APPOINTMENT_STATE_TO_DO;\r\n        }\r\n\r\n        //Otherwise, the appointment is occuring currrently\r\n        return APPOINTMENT_STATE_CURRENT;\r\n    }\r\n\r\n    TableTimeCellRenderer(input) {\r\n        const { workStart, workEnd, freeStart, freeEnd } = this.props;\r\n\r\n        const startDate = moment(input.startDate);\r\n        const endDate = moment(input.endDate);\r\n\r\n        let className = \"sleep-period\";\r\n\r\n        if (this.isHoursBetween(workStart, workEnd, startDate, endDate)) {\r\n            className = \"work-period\"\r\n        } else if (this.isHoursBetween(freeStart, freeEnd, startDate, endDate)) {\r\n            className = \"free-period\"\r\n        }\r\n\r\n        return <DayView.TimeTableCell {...input} className={className}></DayView.TimeTableCell>\r\n    }\r\n\r\n    isHoursBetween(periodStart, periodEnd, checkStart, checkEnd) {\r\n        const periodStartDate = checkStart.clone().startOf('day').set('hour', periodStart);\r\n        const periodEndDate = checkEnd.clone().startOf('day').set('hour', periodEnd);\r\n\r\n        return checkStart.isBetween(periodStartDate, periodEndDate, undefined, \"[)\") &&\r\n            checkEnd.isBetween(periodStartDate, periodEndDate, undefined, \"(]\")\r\n\r\n    }\r\n\r\n    getCustomAppointmentContent(props) {\r\n        const { data, formatDate } = props;\r\n\r\n        const job = this.findJobOfAppointment(data);\r\n\r\n        return (\r\n            <Appointments.AppointmentContent {...props} style={{ height: '100%' }}>\r\n                <div className=\"app-appointment-content\">\r\n                    <div className=\"title\">\r\n                        {job.name}\r\n                    </div>\r\n                    {\r\n                        job.price\r\n                            ? <div className=\"value-wrapper\">$ {job.price.toFixed(2)}</div>\r\n                            : null\r\n                    }\r\n                    {\r\n                        data.state !== APPOINTMENT_STATE_FIXED\r\n                            ? <span>Due to: {job.dueDate.format('DD/MM/YYYY HH:00')}</span>\r\n                            : null\r\n                    }\r\n                    <div className=\"hour-wrapper\">\r\n                        <span>{formatDate(data.startDate, { hour: 'numeric', minute: 'numeric' })}</span>\r\n                        <span style={{ padding: \"0px 3px\" }}> - </span>\r\n                        <span>{formatDate(data.endDate, { hour: 'numeric', minute: 'numeric' })}</span>\r\n                    </div>\r\n                </div>\r\n            </Appointments.AppointmentContent>\r\n        )\r\n    }\r\n\r\n    getTooltipContent(props) {\r\n        const { appointmentData, formatDate } = props;\r\n\r\n        const job = this.findJobOfAppointment(appointmentData);\r\n        if (!job) { return null; }\r\n\r\n        <SplitCellsOutlined />\r\n\r\n        return (\r\n            <div className=\"tooltip-content\">\r\n                <Grid container alignItems=\"flex-start\" className=\"meta\">\r\n                    <Grid item xs={2} style={{ display: 'flex', justifyContent: 'center' }} >\r\n                        <Lens className=\"lens\" style={{\r\n                            color: appointmentData.state === APPOINTMENT_STATE_TO_DO\r\n                                ? '#1890ff'\r\n                                : appointmentData.state === APPOINTMENT_STATE_FIXED\r\n                                    ? '#039be5'\r\n                                    : appointmentData.state === APPOINTMENT_STATE_COMPLETED\r\n                                        ? '#a4b1db'\r\n                                        : appointmentData.state === APPOINTMENT_STATE_CURRENT\r\n                                            ? 'green'\r\n                                            : appointmentData.state === APPOINTMENT_STATE_LATE\r\n                                                ? 'orange'\r\n                                                : 'crimson'\r\n                        }} />\r\n                    </Grid>\r\n                    <Grid item xs={10}>\r\n                        <div className=\"title\" >\r\n                            {job.name}\r\n                        </div>\r\n                        <div >\r\n                            {appointmentData.startDate.format('dddd, DD MMMM YYYY')}\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container alignItems=\"center\" style={{ marginTop: '10px' }}>\r\n                    <Grid item xs={2} style={{ display: 'flex', justifyContent: 'center', color: 'gray' }} >\r\n                        <ExclamationCircleOutlined style={{ fontSize: '24px' }} />\r\n                    </Grid>\r\n                    <Grid item xs={10}>\r\n                        <div >\r\n                            {`${formatDate(appointmentData.startDate, { hour: 'numeric', minute: 'numeric' })}\r\n                            - ${formatDate(appointmentData.endDate, { hour: 'numeric', minute: 'numeric' })}`}\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n                {\r\n                    !appointmentData.state === APPOINTMENT_STATE_FIXED\r\n                        ?\r\n                        <Grid container alignItems=\"center\" >\r\n                            <Grid item xs={2} style={{ display: 'flex', justifyContent: 'center', color: 'gray' }} >\r\n                                <AccessTime style={{ fontSize: '24px' }} />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={10}>\r\n                                <span>Due at {job.dueDate.format('dddd, DD MMMM YYYY HH:00')}</span>\r\n                            </Grid>\r\n                        </Grid>\r\n                        :\r\n                        null\r\n                }\r\n                {\r\n                    job.description\r\n                        ?\r\n                        <p className=\"description\">\r\n                            {job.description}\r\n                        </p>\r\n                        :\r\n                        null\r\n                }\r\n\r\n\r\n                <div className=\"tooltip-wrapper\">\r\n                    <Button\r\n                        disabled={appointmentData.state === APPOINTMENT_STATE_COMPLETED || appointmentData.state === APPOINTMENT_STATE_FIXED}\r\n                        onClick={() => this.onCompleteTheAppointment(appointmentData)}\r\n                        icon={<CheckCircleOutlined />}\r\n                        size={'large'}>\r\n                        Complete\r\n                    </Button>\r\n                    <Button\r\n                        disabled={appointmentData.state === APPOINTMENT_STATE_FIXED}\r\n                        onClick={() => this.onDelayTheAppointment(appointmentData)}\r\n                        icon={<FieldTimeOutlined />}\r\n                        size={'large'}>\r\n                        Delay\r\n                    </Button>\r\n                    <Button\r\n                        disabled={appointmentData.state === APPOINTMENT_STATE_FIXED}\r\n                        onClick={() => this.onFinishTheAppointment(appointmentData)}\r\n                        icon={<DoubleRightOutlined />}\r\n                        size={'large'}>\r\n                        Finish\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onCompleteTheAppointment(appointment) {\r\n        const { appointments, jobs } = this.props;\r\n\r\n        const updatedListOfAppointments = [...appointments];\r\n        const indexOnList = updatedListOfAppointments.findIndex(toCompare => toCompare.id === appointment.id);\r\n\r\n        if (indexOnList === -1) {\r\n            console.error(\"Unknown appointment was completed!\");\r\n            return;\r\n        }\r\n\r\n        updatedListOfAppointments[indexOnList].state = APPOINTMENT_STATE_COMPLETED;\r\n        const associatedJob = jobs.find(job => job.id === appointment.jobId);\r\n\r\n        //Check that with the conclusion of this appointment, the job was completed entirely\r\n        if (this.shouldDeleteJob(associatedJob, updatedListOfAppointments)) {\r\n            this.props.deleteJob(associatedJob);\r\n\r\n            this.toggleVisibility();\r\n            this.onAppointmentMetaChange();\r\n        } else {\r\n            this.props.updateAppointment(updatedListOfAppointments[indexOnList]);\r\n            this.props.updateJob(this.onUpdateJobStateOnAppointmentChange(associatedJob, updatedListOfAppointments));\r\n        }\r\n    }\r\n\r\n    onUpdateJobStateOnAppointmentChange(job, allAppointments) {\r\n        const jobAppointments = allAppointments.filter(appointment => job.appointments.includes(appointment.id));\r\n\r\n        //If no appointment is still in the state to do, means that the job is fully completed and should be removed\r\n        if (jobAppointments.filter(appointment =>\r\n            appointment.state === APPOINTMENT_STATE_TO_DO ||\r\n            appointment.state === APPOINTMENT_STATE_CURRENT ||\r\n            appointment.state === APPOINTMENT_STATE_DELAY ||\r\n            appointment.state === APPOINTMENT_STATE_LATE).length === 0) {\r\n            job.state = JOB_COMPLETED\r\n            //Else if not a single appointment has started, that means the job is still on hold\r\n        } else if (jobAppointments.filter(appointment => appointment.state === APPOINTMENT_STATE_COMPLETED).length === 0) {\r\n            job.state = JOB_NOT_STARTED\r\n        } else {\r\n            job.state = JOB_ON_GOING\r\n        }\r\n\r\n        return job;\r\n    }\r\n\r\n    shouldDeleteJob(job, allAppointments) {\r\n        const jobAppointments = allAppointments.filter(appointment => job.appointments.includes(appointment.id));\r\n\r\n        return jobAppointments.filter(appointment =>\r\n            appointment.state === APPOINTMENT_STATE_TO_DO ||\r\n            appointment.state === APPOINTMENT_STATE_CURRENT ||\r\n            appointment.state === APPOINTMENT_STATE_DELAY ||\r\n            appointment.state === APPOINTMENT_STATE_LATE ||\r\n            appointment.state === APPOINTMENT_STATE_FIXED\r\n        ).length === 0;\r\n    }\r\n\r\n    onDelayTheAppointment(appointment) {\r\n        const { workStart, workEnd, freeStart, freeEnd, appointments } = this.props;\r\n\r\n        const job = this.findJobOfAppointment(appointment);\r\n\r\n        const newDistributedPeriods = verifyAppointmentDisponibility(\r\n            appointment.hours,\r\n            //Check if the appointment is currently ending after the dueDate, or if the appointment can't possibly be put before the dueDate\r\n            appointment.endDate.isSameOrAfter(job.dueDate) || appointment.endDate.add(appointment.hours, 'hours').isAfter(job.dueDate)\r\n                ? moment().add(1, 'year')\r\n                : job.dueDate,\r\n            appointments,\r\n            [workStart, workEnd],\r\n            [freeStart, freeEnd],\r\n            appointment.endDate\r\n        );\r\n\r\n        if (newDistributedPeriods.state === SCHEDULE_FREE_TIME || newDistributedPeriods === SCHEDULE_FULL) {\r\n            this.setState({\r\n                realocatedState: { ...newDistributedPeriods, appointment, job },\r\n                isRealocateModalVisible: true\r\n            })\r\n\r\n            this.toggleVisibility();\r\n            this.onAppointmentMetaChange();\r\n        } else {\r\n            this.onConfirmationOfRealocation({ ...newDistributedPeriods, appointment, job })\r\n        }\r\n    }\r\n\r\n    onConfirmationOfRealocation(directState = null) {\r\n        const { periods, job, appointment } = directState || this.state.realocatedState;\r\n\r\n        const newAppointments = periods.map(period => {\r\n            const appointment = createPeriodObject(period, job.id)\r\n            const currentState = this.checkStateOfAppointment(appointment)\r\n            if (appointment.state !== currentState) {\r\n                appointment.state = currentState;\r\n            }\r\n\r\n            return appointment\r\n        })\r\n\r\n        //Removed old appointment and insert new ids from the job object\r\n        const indexOfAppointment = job.appointments.findIndex(appoID => appoID === appointment.id);\r\n        job.appointments.splice(indexOfAppointment, 1, ...newAppointments.map(app => app.id))\r\n\r\n        this.props.updateJob(job);\r\n        this.props.deleteAppointment([appointment.id]);\r\n        this.props.addAppointments(newAppointments);\r\n\r\n        this.setState({\r\n            isRealocateModalVisible: false,\r\n            realocatedState: null\r\n        })\r\n    }\r\n\r\n    onFinishTheAppointment(appointment) {\r\n        const job = this.findJobOfAppointment(appointment);\r\n\r\n        this.props.deleteJob(job);\r\n\r\n        this.toggleVisibility();\r\n        this.onAppointmentMetaChange();\r\n    }\r\n\r\n    getAppointmentComponet(props) {\r\n        const { children, style, data } = props;\r\n\r\n        let className;\r\n\r\n        switch (data.state) {\r\n            case APPOINTMENT_STATE_COMPLETED:\r\n                className = \"appointment-done\"\r\n                break;\r\n            case APPOINTMENT_STATE_FIXED:\r\n                className = \"appointment-fixed\";\r\n                break;\r\n            case APPOINTMENT_STATE_CURRENT:\r\n                className = \"appointment-active\";\r\n                break;\r\n            case APPOINTMENT_STATE_LATE:\r\n                className = \"appointment-late\"\r\n                break;\r\n            case APPOINTMENT_STATE_DELAY:\r\n                className = \"appointment-delay\"\r\n        }\r\n\r\n        return (\r\n            <Appointments.Appointment\r\n                {...props}\r\n                className={className}\r\n                style={{\r\n                    ...style\r\n                }}\r\n                onClick={({ target, data }) => {\r\n                    let targetElement = target;\r\n\r\n                    while (true) {\r\n                        targetElement = targetElement.parentElement;\r\n                        if (targetElement.style.position === 'absolute') { break; }\r\n                    }\r\n\r\n                    this.onAppointmentMetaChange({ target: targetElement, data });\r\n                    this.toggleVisibility();\r\n                }}\r\n            >\r\n                {children}\r\n            </Appointments.Appointment>\r\n        )\r\n    }\r\n\r\n    findJobOfAppointment(appointment, index = false) {\r\n        return index\r\n            ?\r\n            this.props.jobs.findIndex(job => job.id === appointment.jobId)\r\n            :\r\n            this.props.jobs.find(job => job.id === appointment.jobId);\r\n    }\r\n\r\n    onAppointmentChangeCommited(props) {\r\n        const { appointments } = this.props;\r\n\r\n        if (props.deleted) {\r\n            const appointment = appointments.find(appo => appo.id === props.deleted);\r\n            const job = this.findJobOfAppointment(appointment);\r\n\r\n            if (appointment.state === APPOINTMENT_STATE_FIXED) {\r\n                this.setState({\r\n                    isRecurrentChangeModalVisible: true,\r\n                    recurrentChangeState: {\r\n                        previousStart: appointment.startDate,\r\n                        previosEnd: appointment.endDate,\r\n                        job,\r\n                        appointment,\r\n                        change: 'DELETED'\r\n                    }\r\n                })\r\n\r\n                return;\r\n            }\r\n\r\n            const previewedDeletionAppointments = [...appointments];\r\n            previewedDeletionAppointments.splice(previewedDeletionAppointments.findIndex(appo => appo.id === props.deleted), 1)\r\n\r\n            if (this.shouldDeleteJob(job, previewedDeletionAppointments)) {\r\n                this.props.deleteJob(job);\r\n            } else {\r\n                job.appointments.splice(job.appointments.findIndex(appo => appo === props.deleted), 1);\r\n\r\n                this.props.deleteAppointment([props.deleted]);\r\n                this.props.updateJob(job);\r\n            }\r\n\r\n            this.toggleVisibility();\r\n            this.onAppointmentMetaChange();\r\n        }\r\n\r\n        if (props.changed) {\r\n            Object.keys(props.changed).forEach(changedId => {\r\n                const { endDate, startDate } = props.changed[changedId];\r\n\r\n                const appointment = appointments.find(appo => appo.id === changedId);\r\n\r\n                let newStartDate = moment(startDate).startOf('hour');\r\n                let newEndDate = moment(endDate).startOf('hour');\r\n\r\n                if (newEndDate.diff(newStartDate, 'hours') === 24) {\r\n                    newStartDate.set('hour', this.props.workStart);\r\n                    newEndDate = newStartDate.clone().set('hour', this.props.workStart + appointment.hours);\r\n                }\r\n\r\n                //Check if the new start date is the same as the old one, if is there's nothing left to do\r\n                if (newStartDate.isSame(appointment.startDate)) {\r\n                    return;\r\n                }\r\n\r\n                if (appointment.state === APPOINTMENT_STATE_FIXED && appointment.startDate.get('day') === newStartDate.get('day')) {\r\n                    const job = this.findJobOfAppointment(appointment);\r\n\r\n                    this.setState({\r\n                        isRecurrentChangeModalVisible: true,\r\n                        recurrentChangeState: {\r\n                            previousStart: appointment.startDate,\r\n                            previosEnd: appointment.endDate,\r\n                            newStart: newStartDate,\r\n                            newEnd: newEndDate,\r\n                            job,\r\n                            appointment,\r\n                            change: 'CHANGED'\r\n                        }\r\n                    })\r\n\r\n                    return;\r\n                }\r\n\r\n                const collidedAppointmentOfSameJob = appointments.find(appo => {\r\n\r\n                    if (newStartDate.isBetween(appo.startDate, appo.endDate, 'hour', '[)')) {\r\n                        return appo.jobId === appointment.jobId && appo.id !== appointment.id;\r\n                    }\r\n\r\n                    return false;\r\n                })\r\n\r\n                //Check if the appointment collided with another with the same job, so to trigger the merge popup\r\n                if (collidedAppointmentOfSameJob) {\r\n                    this.setState({\r\n                        isMergeModalVisible: true,\r\n                        mergeState: {\r\n                            collidedAppointment: collidedAppointmentOfSameJob,\r\n                            appointment,\r\n                            updatedAppointment: {\r\n                                ...appointment,\r\n                                startDate: newStartDate,\r\n                                endDate: newEndDate,\r\n                                state: this.checkStateOfAppointment(appointment)\r\n                            },\r\n                            job: this.findJobOfAppointment(appointment)\r\n                        }\r\n                    })\r\n                    return;\r\n                }\r\n\r\n                appointment.startDate = newStartDate;\r\n                appointment.endDate = newEndDate;\r\n                appointment.state = this.checkStateOfAppointment(appointment);\r\n\r\n                this.props.updateAppointment(appointment);\r\n            })\r\n        }\r\n    }\r\n\r\n    onAppointmentPartitionSet({ hour }) {\r\n        const { appointments, deleteAppointment, updateJob, addAppointments } = this.props;\r\n\r\n        const appointment = this.state.partitionAppointmentData;\r\n\r\n        const modifiedAppointments = appointments.slice();\r\n        modifiedAppointments.splice(modifiedAppointments.findIndex(appo => appo.id === appointment.id), 1);\r\n        const job = this.findJobOfAppointment(appointment);\r\n\r\n        const newPeriods = getAllVacatedSpacesInPeriodUntilDueDate(\r\n            appointment.startDate.get('hour'),\r\n            appointment.endDate.get('hour'),\r\n            appointment.endDate,\r\n            modifiedAppointments,\r\n            0,\r\n            appointment.startDate,\r\n            false,\r\n            hour\r\n        )\r\n\r\n        let newAppointments = newPeriods.map(period => createPeriodObject(period, job.id));\r\n        job.appointments.splice(job.appointments.findIndex(appo => appo === appointment.id), 1);\r\n        job.appointments.push(...newAppointments.map(newAppo => newAppo.id));\r\n\r\n        newAppointments = newAppointments.map(newAppointment => {\r\n            const currentState = this.checkStateOfAppointment(newAppointment);\r\n\r\n            if (newAppointment.state !== currentState) {\r\n                newAppointment.state = currentState;\r\n            }\r\n\r\n            return newAppointment\r\n        })\r\n\r\n        deleteAppointment([appointment.id]);\r\n        addAppointments(newAppointments);\r\n        updateJob(job);\r\n\r\n\r\n        this.setState({ partitionAppointmentData: null });\r\n    }\r\n\r\n    onAppointmentMerge({ collidedAppointment, appointment, updatedAppointment, job }, merge) {\r\n        const { deleteAppointment, updateAppointment } = this.props;\r\n\r\n        if (merge) {\r\n            job.appointments.splice(job.appointments.findIndex(appo => appo === appointment.id), 1);\r\n            collidedAppointment.hours += appointment.hours;\r\n            collidedAppointment.endDate.add(appointment.hours, 'hours');\r\n\r\n            deleteAppointment([appointment.id]);\r\n            updateAppointment(collidedAppointment);\r\n            updateJob(job);\r\n        } else {\r\n            updateAppointment(updatedAppointment);\r\n        }\r\n\r\n        this.setState({ isMergeModalVisible: false, mergeState: null });\r\n    }\r\n\r\n    validateHourInserted(_, hours) {\r\n        if (!hours) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        try {\r\n            parseInt(hours, 10);\r\n        } catch (e) {\r\n            return Promise.reject('The hours value need to be a number!')\r\n        }\r\n\r\n        if (this.state.partitionAppointmentData.hours <= hours) {\r\n            return Promise.reject('You can\\'t partition an appointment by the same or higher number of hours!')\r\n        }\r\n\r\n        if (hours <= 0) {\r\n            return Promise.reject('The number of hour should be non-negative and non-zero!')\r\n        }\r\n\r\n        return Promise.resolve();\r\n    }\r\n\r\n    getToolbarFreeSpaceComponent() {\r\n        return (\r\n            <Toolbar.FlexibleSpace className=\"toolbar-flexible-space\" >\r\n                {\r\n                    this.props.workStart !== null && this.props.freeStart !== null\r\n                        ?\r\n                        <Checkbox\r\n                            checked={this.props.showSleepPeriod}\r\n                            onChange={(event) => {\r\n                                const { setShowSleepPeriod } = this.props;\r\n                                const checked = event.target.checked\r\n\r\n                                setShowSleepPeriod(checked);\r\n                            }} >\r\n                            Show Sleep Period\r\n                        </Checkbox>\r\n                        :\r\n                        null\r\n                }\r\n\r\n            </Toolbar.FlexibleSpace>\r\n        )\r\n    }\r\n\r\n    getViewSwitcherComponent(props) {\r\n        return <ViewSwitcher.Switcher {...props} onChange={(viewName) => this.setState({ currentViewName: viewName })}></ViewSwitcher.Switcher >\r\n    }\r\n\r\n    getNavigatorRootComponent(props) {\r\n        return <DateNavigator.Root className=\"date-navigator-root\" {...props}></DateNavigator.Root>\r\n    }\r\n\r\n    getDateNavigatorComponent(props) {\r\n        const isForward = props.type === 'forward'\r\n        return (\r\n            <div className={`navigation-pair-button-wrapper ${isForward ? '' : 'reverse'}`}>\r\n                <button onClick={() => this.onNaviagateDate(props.type)}>\r\n                    {isForward ? <RightOutlined /> : <LeftOutlined />}\r\n                </button>\r\n                {\r\n                    this.state.currentViewName === 'Day'\r\n                        ?\r\n                        <button onClick={() => this.onNaviagateDate(props.type, true)}>\r\n                            {props.type === 'forward' ? <DoubleRightOutlined /> : <DoubleLeftOutlined />}\r\n                        </button>\r\n                        :\r\n                        null\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onNaviagateDate(direction, fastForward = false) {\r\n        const currentDay = this.state.currentDay;\r\n\r\n        switch (this.state.currentViewName) {\r\n            case 'Day':\r\n                this.setState({\r\n                    currentDay: direction === 'forward'\r\n                        ?\r\n                        moment(currentDay).add(fastForward ? 7 : 1, 'day').toDate()\r\n                        :\r\n                        moment(currentDay).subtract(fastForward ? 7 : 1, 'day').toDate()\r\n                })\r\n                return\r\n            case 'Month':\r\n                this.setState({\r\n                    currentDay: direction === 'forward'\r\n                        ?\r\n                        moment(currentDay).add(1, 'month').toDate()\r\n                        :\r\n                        moment(currentDay).subtract(1, 'month').toDate()\r\n                })\r\n                return;\r\n        }\r\n    }\r\n\r\n    onRecurrentAppointmentChange({ previousStart, previosEnd, newStart, newEnd, job, appointment, change }, specification) {\r\n        switch (specification) {\r\n            case 'THIS':\r\n                if (change === 'CHANGED') {\r\n                    appointment.startDate = newStart;\r\n                    appointment.endDate = newEnd;\r\n                    this.props.updateAppointment(appointment);\r\n                } else {\r\n                    const previewedDeletionAppointments = [...this.props.appointments];\r\n                    previewedDeletionAppointments.splice(previewedDeletionAppointments.findIndex(appo => appo.id === appointment.id), 1)\r\n\r\n                    if (this.shouldDeleteJob(job, previewedDeletionAppointments)) {\r\n                        this.props.deleteJob(job);\r\n                    } else {\r\n                        job.appointments.splice(job.appointments.findIndex(appo => appo === appointment.id), 1);\r\n\r\n                        this.props.deleteAppointment([appointment.id]);\r\n                        this.props.updateJob(job);\r\n                    }\r\n                }\r\n                break;\r\n            case 'DAY':\r\n                const jobAppointments = this.findAllAppointmentsOfJobInWeekDay(job, previousStart.isoWeekday());\r\n\r\n                if (change === 'CHANGED') {\r\n                    jobAppointments.forEach(jobAppo => {\r\n                        jobAppo.startDate.set('hour', newStart.get('hour'))\r\n                        jobAppo.endDate.set('hour', newEnd.get('hour'))\r\n                        this.props.updateAppointment(jobAppo);\r\n                    })\r\n                } else {\r\n                    const previewedDeletionAppointments = [...this.props.appointments];\r\n                    const newJob = Object.assign({}, job);\r\n                    jobAppointments.forEach(jobAppo => {\r\n                        previewedDeletionAppointments.splice(previewedDeletionAppointments.findIndex(appo => appo.id === jobAppo.id), 1)\r\n                    })\r\n\r\n                    if (this.shouldDeleteJob(job, previewedDeletionAppointments)) {\r\n                        this.props.deleteJob(job);\r\n                    } else {\r\n                        jobAppointments.forEach(jobAppo => {\r\n                            newJob.appointments.splice(newJob.appointments.findIndex(appo => appo === jobAppo.id), 1);\r\n                        })\r\n\r\n                        this.props.deleteAppointment(jobAppointments.map(jobAppo => jobAppo.id));\r\n                        this.props.updateJob(newJob);\r\n                    }\r\n                }\r\n                break;\r\n            case 'ALL':\r\n                const allJobAppointments = this.props.appointments.filter(appo => {\r\n                    return job.appointments.find(jobAppo => jobAppo === appo.id)\r\n                })\r\n\r\n                if (change === 'CHANGED') {\r\n                    allJobAppointments.forEach(jobAppo => {\r\n                        jobAppo.startDate.set('hour', newStart.get('hour'))\r\n                        jobAppo.endDate.set('hour', newEnd.get('hour'))\r\n                        this.props.updateAppointment(jobAppo);\r\n                    })\r\n                } else {\r\n                    this.props.deleteJob(job);\r\n                }\r\n                break;\r\n        }\r\n\r\n        this.setState({ isRecurrentChangeModalVisible: false, recurrentChangeState: null })\r\n    }\r\n\r\n    findAllAppointmentsOfJobInWeekDay(job, weekDay) {\r\n        return this.props.appointments.filter(appo => {\r\n            return appo.startDate.isoWeekday() === weekDay && job.appointments.find(jobAppo => jobAppo === appo.id)\r\n        })\r\n    }\r\n\r\n    getHeaderComponent({ children, appointmentData, classes, ...restProps }) {\r\n        return (\r\n            <AppointmentTooltip.Header\r\n                {...restProps}\r\n                appointmentData={appointmentData}\r\n            >\r\n                {\r\n                    appointmentData.state !== APPOINTMENT_STATE_FIXED\r\n                        ?\r\n                        <MaterialButton\r\n                            className=\"icon-button-wrapper\"\r\n                            onClick={() => {\r\n                                this.setState({ isPartitionModalVisible: true, partitionAppointmentData: appointmentData })\r\n                                this.toggleVisibility();\r\n                                this.onAppointmentMetaChange();\r\n                            }}>\r\n                            <SplitCellsOutlined />\r\n                        </MaterialButton>\r\n                        :\r\n                        null\r\n                }\r\n            </AppointmentTooltip.Header>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"home-wrapper\">\r\n                <Header></Header>\r\n                <Paper>\r\n                    <Scheduler\r\n                        locale={\"en-UK\"}\r\n                        data={this.props.appointments}>\r\n                        <ViewState\r\n                            currentDate={this.state.currentDay}\r\n                            currentViewName={this.state.currentViewName}\r\n                            onCurrentDateChange={(date) => this.setState({ currentDay: date })}\r\n                        />\r\n                        <EditingState onCommitChanges={this.onAppointmentChangeCommited.bind(this)} />\r\n\r\n                        <IntegratedEditing />\r\n                        <ConfirmationDialog />\r\n\r\n                        <DayView\r\n                            displayName={'Week'}\r\n                            cellDuration={60}\r\n                            intervalCount={7}\r\n                            startDayHour={this.props.calendarViewHourStart}\r\n                            endDayHour={this.props.calendarViewHourEnd}\r\n                            timeTableCellComponent={this.TableTimeCellRenderer.bind(this)}>\r\n                        </DayView>\r\n                        <MonthView />\r\n\r\n                        <Toolbar flexibleSpaceComponent={this.getToolbarFreeSpaceComponent.bind(this)} />\r\n                        <ViewSwitcher switcherComponent={this.getViewSwitcherComponent.bind(this)} />\r\n                        <DateNavigator\r\n                            rootComponent={this.getNavigatorRootComponent.bind(this)}\r\n                            navigationButtonComponent={this.getDateNavigatorComponent.bind(this)} />\r\n\r\n                        <Appointments\r\n                            appointmentComponent={this.getAppointmentComponet.bind(this)}\r\n                            appointmentContentComponent={this.getCustomAppointmentContent.bind(this)}\r\n                        />\r\n\r\n                        <AppointmentTooltip\r\n                            showCloseButton\r\n                            showDeleteButton\r\n                            headerComponent={this.getHeaderComponent.bind(this)}\r\n                            visible={this.state.isAppointmentTooltipVisible}\r\n                            appointmentMeta={this.state.appointmentTooltipMetadata}\r\n                            onAppointmentMetaChange={this.onAppointmentMetaChange}\r\n                            onVisibilityChange={() => this.setState({ isAppointmentTooltipVisible: false })}\r\n                            contentComponent={this.getTooltipContent.bind(this)}\r\n                        />\r\n\r\n                        <DragDropProvider\r\n                            allowResize={() => false}\r\n                        />\r\n\r\n                    </Scheduler>\r\n                </Paper>\r\n\r\n                {\r\n                    this.state.realocatedState\r\n                        ?\r\n                        <Modal\r\n                            visible={this.state.isRealocateModalVisible}\r\n                            onOk={() => this.onConfirmationOfRealocation()}\r\n                            onCancel={() => this.setState({ isRealocateModalVisible: false, realocatedState: null })}>\r\n                            <p style={{ marginTop: '20px' }}>\r\n                                {\r\n                                    this.state.realocatedState.state === SCHEDULE_FREE_TIME\r\n                                        ?\r\n\r\n                                        `The appointment submitted can't be concluded during your work period,\r\n                                        do you want to allocate your free time for this appointment?`\r\n                                        :\r\n                                        `The appointment submitted can't be concluded during your work or free time,\r\n                                        should the scheduler ignore your sleep period and allocate time in it?`\r\n                                }\r\n                            </p>\r\n                        </Modal>\r\n                        :\r\n                        null\r\n                }\r\n\r\n                <Modal\r\n                    visible={this.state.isMergeModalVisible}\r\n                    footer={[\r\n                        <Button key=\"cancel\" className=\"cancel\" onClick={() => this.setState({ isMergeModalVisible: false, mergeState: null })}>\r\n                            Cancel\r\n                        </Button>,\r\n                        <Button key=\"merge\" type=\"primary\" onClick={() => this.onAppointmentMerge(this.state.mergeState, true)}>\r\n                            Merge\r\n                        </Button>,\r\n                        <Button key=\"ignore\" type=\"primary\" onClick={() => this.onAppointmentMerge(this.state.mergeState, false)} >\r\n                            Ignore\r\n                        </Button>\r\n                    ]}\r\n                    onCancel={() => this.setState({ isMergeModalVisible: false, mergeState: null })}\r\n                    className=\"merge-modal\">\r\n                    <h2>Appointment Merging</h2>\r\n                    <p style={{ marginTop: '20px' }}>\r\n                        The appointment that you dragged is overlapping with another appointment of the same job.\r\n                        <br />\r\n                        <br />\r\n                        You can press 'Merge' to merge both appointment into one, press 'Ignore' to apply the drag but not merge\r\n                        or 'Cancel' to abort the operation.\r\n                        <br />\r\n                        <br />\r\n                        You can separate the merged appointment again by using the partition tool that is avaliable at the appointment options.\r\n                    </p>\r\n                </Modal>\r\n\r\n                {\r\n                    this.state.isRecurrentChangeModalVisible\r\n                        ?\r\n                        <Modal\r\n                            visible={this.state.isRecurrentChangeModalVisible}\r\n                            footer={[\r\n                                <Button key=\"cancelRecurrent\" className=\"cancel\" onClick={() => this.setState({ isRecurrentChangeModalVisible: false, recurrentChangeState: null })}>\r\n                                    Cancel\r\n                                </Button>,\r\n                                <Button key=\"everything\" className=\"everything\" type=\"primary\" onClick={() => this.onRecurrentAppointmentChange(this.state.recurrentChangeState, 'ALL')} >\r\n                                    Everything\r\n                                </Button>,\r\n                                <Button key=\"allOnDay\" className=\"day\" type=\"primary\" onClick={() => this.onRecurrentAppointmentChange(this.state.recurrentChangeState, 'DAY')} >\r\n                                    All on {this.state.recurrentChangeState.previousStart.format('dddd')}\r\n                                </Button>,\r\n                                <Button key=\"onlyThis\" className=\"this\" type=\"primary\" onClick={() => this.onRecurrentAppointmentChange(this.state.recurrentChangeState, 'THIS')}>\r\n                                    Only This\r\n                                </Button>\r\n                            ]}\r\n                            onOk={() => true}\r\n                            onCancel={() => this.setState({ isRecurrentChangeModalVisible: false, recurrentChangeState: null })}\r\n                            className={this.state.recurrentChangeState.change === 'CHANGED' ? \"recurrent-change-modal changed\" : \"recurrent-change-modal deleted\"}>\r\n                            <h2>Recurrent Appointment Change</h2>\r\n                            {\r\n                                this.state.recurrentChangeState.change === 'CHANGED'\r\n                                    ?\r\n                                    <p>\r\n                                        You are currently trying to change the period of one appointment of the recurrent event\r\n                                        \"{this.state.recurrentChangeState.job.name}\".\r\n                                        <br />\r\n                                        <br />\r\n                                        Please specify if this change should only occur to the modified appointment,\r\n                                        or all the appointments of this event that are in the\r\n                                        same day ({this.state.recurrentChangeState.previousStart.format('dddd')}). You could\r\n                                        also commit the change to every single appointment of the recurrent event.\r\n                                        <br />\r\n                                        <br />\r\n                                        Press \"Only This\" to modify only the selected appointment, \"All on {this.state.recurrentChangeState.previousStart.format('dddd')}\"\r\n                                        to modify all the appointments on the same week day or \"Everything\" to modify all appointments of the recurrent event.\r\n                                    </p>\r\n                                    :\r\n                                    <p>\r\n                                        You are currently trying to delete the period of one appointment of the recurrent event\r\n                                        \"{this.state.recurrentChangeState.job.name}\".\r\n                                        <br />\r\n                                        <br />\r\n                                        Please specify if this deletion should only occur to the modified appointment,\r\n                                        or all the appointments of this event that are in the\r\n                                        same day ({this.state.recurrentChangeState.previousStart.format('dddd')}). You could\r\n                                        also delete every single appointment of the recurrent event, removing the event entirely from the scheduler.\r\n                                        <br />\r\n                                        <br />\r\n                                        Press \"Only This\" to delete only the selected appointment, \"All on {this.state.recurrentChangeState.previousStart.format('dddd')}\"\r\n                                        to delete all the appointments on the same week day or \"Everything\" to delete all appointments and the recurrent event.\r\n                                    </p>\r\n                            }\r\n                        </Modal>\r\n                        :\r\n                        null\r\n                }\r\n\r\n                {\r\n                    this.state.isPartitionModalVisible\r\n                        ?\r\n                        <Modal\r\n                            visible={this.state.isPartitionModalVisible}\r\n                            onOk={() => {\r\n                                this.partitionForm.current.validateFields()\r\n                                    .then(values => {\r\n                                        this.onAppointmentPartitionSet(values);\r\n                                        this.setState({ isPartitionModalVisible: false })\r\n                                    })\r\n                                    .catch(info => {\r\n                                        console.log('Validate Failed:', info);\r\n                                        this.setState({ isPartitionModalVisible: false })\r\n                                    });\r\n                            }}\r\n                            onCancel={() => this.setState({ isPartitionModalVisible: false })}\r\n                            className=\"hour-splitter-modal\"\r\n                        >\r\n                            <h2>Appointment Partition Tool</h2>\r\n                            <p>Input the number of maximum number of hours that each partition of this appointment should have,\r\n                                the Scheduler will divide the appointment by the hour inputted </p>\r\n                            <Form\r\n                                ref={this.partitionForm}\r\n                                name=\"partitionForm\"\r\n                            >\r\n                                <Form.Item\r\n                                    name=\"hour\"\r\n                                    rules={[{ required: true, message: 'You need to input a number of hours!' }, { validator: this.validateHourInserted.bind(this) }]}\r\n                                >\r\n                                    <Input\r\n                                        placeholder=\"XX\"\r\n                                        type=\"number\"\r\n                                        prefix={<FieldTimeOutlined />}\r\n                                        suffix={'Hours'}\r\n                                    />\r\n                                </Form.Item>\r\n\r\n                            </Form>\r\n\r\n                        </Modal>\r\n                        :\r\n                        null\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    workStart: state.period.workStart,\r\n    workEnd: state.period.workEnd,\r\n    freeStart: state.period.freeStart,\r\n    freeEnd: state.period.freeEnd,\r\n    calendarViewHourStart: state.period.calendarViewHourStart,\r\n    calendarViewHourEnd: state.period.calendarViewHourEnd,\r\n    appointments: state.appointment.appointments,\r\n    jobs: state.appointment.jobs,\r\n    showSleepPeriod: state.config.showSleepPeriod\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        addAppointments: (payload) => dispatch(addAppointment(payload)),\r\n        updateAppointment: (payload) => dispatch(updateAppointment(payload)),\r\n        deleteAppointment: (payload) => dispatch(deleteAppointment(payload)),\r\n        updateJob: (payload) => dispatch(updateJob(payload)),\r\n        deleteJob: (payload) => dispatch(deleteJob(payload)),\r\n        setShowSleepPeriod: (payload) => dispatch(setShowSleepConfiguration(payload))\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HomeComponent);","import * as types from './configuration.types';\r\n\r\nexport const setShowSleepConfiguration = checked => ({\r\n    type: types.SET_SHOW_SLEEP_PERIOD_CONFIG,\r\n    payload: checked\r\n});","import logo from './logo.svg';\r\nimport './App.css';\r\nimport HomeComponent from './pages/Home/Home.component';\r\n\r\nfunction App() {\r\n  return (\r\n    <HomeComponent></HomeComponent>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import moment from 'moment';\r\n\r\nconst replacer = (_, value) => value instanceof moment ? value.toISOString() : value\r\n\r\nconst reviver = (_, value) =>\r\n    (typeof value === 'string' && value.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/))\r\n        ? moment(value)\r\n        : value\r\n\r\nexport const encode = toDeshydrate => JSON.stringify(toDeshydrate, replacer)\r\n\r\nexport const decode = toRehydrate => JSON.parse(toRehydrate, reviver)","export function updateAppointmentOnList(appointmentList = [], toUpdateAppointment) {\r\n    const indexOnList = appointmentList.findIndex(appointment => appointment.id === toUpdateAppointment.id);\r\n\r\n    if (indexOnList === -1) {\r\n        console.error(\"The update operation on appointments failed, no appointment with id \" + toUpdateAppointment.id + \" found\");\r\n        return appointmentList;\r\n    }\r\n\r\n    const updatedList = [...appointmentList];\r\n    updatedList[indexOnList] = toUpdateAppointment;\r\n\r\n    return updatedList;\r\n}\r\n\r\nexport function updateJobOnList(jobList = [], toUpdateJob) {\r\n    const indexOnList = jobList.findIndex(job => job.id === toUpdateJob.id);\r\n\r\n    if (indexOnList === -1) {\r\n        console.error(\"The update operation on jobs failed, no job with id \" + toUpdateJob.id + \" found\");\r\n        return jobList;\r\n    }\r\n\r\n    const updatedList = [...jobList];\r\n    updatedList[indexOnList] = toUpdateJob;\r\n\r\n    return updatedList;\r\n}\r\n\r\nexport function deleteAppointment(appointmentList = [], toDeleteIDs = []) {\r\n    const updatedList = [...appointmentList];\r\n\r\n    toDeleteIDs.forEach(id => {\r\n        updatedList.splice(updatedList.findIndex(appointment => appointment.id === id), 1)\r\n    })\r\n\r\n    return updatedList;\r\n}\r\n\r\nexport function deleteJobAndAssociatedAppointments(toDeletejob, jobList = [], appointmentList = []) {\r\n    const indexOnList = jobList.findIndex(job => job.id === toDeletejob.id);\r\n\r\n    const updatedJobList = [...jobList];\r\n    updatedJobList.splice(indexOnList, 1);\r\n\r\n    const updatedAppointmentList = [...appointmentList];\r\n    toDeletejob.appointments.forEach(appointmentOfJobID => {\r\n        const indexOnAppointmentList = updatedAppointmentList.findIndex(appointment => appointment.id === appointmentOfJobID);\r\n        updatedAppointmentList.splice(indexOnAppointmentList, 1);\r\n    });\r\n\r\n    return { jobs: updatedJobList, appointments: updatedAppointmentList }\r\n}","import * as types from './appointment.types';\r\nimport { deleteAppointment, deleteJobAndAssociatedAppointments, updateAppointmentOnList, updateJobOnList } from './appointment.utils';\r\n\r\nconst INITIAL_STATE = {\r\n    appointments: [],\r\n    jobs: [],\r\n    history: []\r\n};\r\n\r\nconst appointmentReducer = (state = INITIAL_STATE, action) => {\r\n    switch (action.type) {\r\n        case types.ADD_APPOINTMENTS:\r\n            return {\r\n                ...state,\r\n                appointments: [...state.appointments, ...action.payload]\r\n            };\r\n        case types.UPDATED_APPOINTMENT:\r\n            return {\r\n                ...state,\r\n                appointments: updateAppointmentOnList(state.appointments, action.payload)\r\n            }\r\n        case types.DELETE_APPOINTMENT:\r\n            return {\r\n                ...state,\r\n                appointments: deleteAppointment(state.appointments, action.payload)\r\n            }\r\n        case types.ADD_JOB:\r\n            return {\r\n                ...state,\r\n                jobs: [...state.jobs, action.payload]\r\n            }\r\n        case types.UPDATE_JOB:\r\n            return {\r\n                ...state,\r\n                jobs: updateJobOnList(state.jobs, action.payload)\r\n            }\r\n        case types.DELETE_JOB:\r\n            const { jobs, appointments } = deleteJobAndAssociatedAppointments(action.payload, state.jobs, state.appointments)\r\n            return {\r\n                ...state,\r\n                jobs,\r\n                appointments\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default appointmentReducer;","import * as types from './period.types';\r\nimport * as configTypes from '../global-configuration/configuration.types';\r\n\r\nconst INITIAL_STATE = {\r\n    workStart: null,\r\n    workEnd: null,\r\n    freeStart: null,\r\n    freeEnd: null,\r\n    calendarViewHourStart: 0,\r\n    calendarViewHourEnd: 24\r\n};\r\n\r\nconst periodReducer = (state = INITIAL_STATE, action) => {\r\n    switch (action.type) {\r\n        case types.SET_WORK_PERIOD:\r\n            return {\r\n                ...state,\r\n                workStart: action.payload.start,\r\n                workEnd: action.payload.end\r\n            };\r\n        case types.SET_FREE_PERIOD:\r\n            return {\r\n                ...state,\r\n                freeStart: action.payload.start,\r\n                freeEnd: action.payload.end\r\n            };\r\n        case configTypes.SET_SHOW_SLEEP_PERIOD_CONFIG:\r\n            return {\r\n                ...state,\r\n                calendarViewHourStart: action.payload ? 0 : state.workStart ? Math.min(state.workStart, state.freeStart) : 0,\r\n                calendarViewHourEnd: action.payload ? 24 : state.workEnd ? Math.max(state.workEnd, state.freeEnd) : 24\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default periodReducer;","import * as types from './configuration.types';\r\n\r\nconst INITIAL_STATE = {\r\n    showSleepPeriod: true\r\n};\r\n\r\nconst configurationReducer = (state = INITIAL_STATE, action) => {\r\n    switch (action.type) {\r\n        case types.SET_SHOW_SLEEP_PERIOD_CONFIG:\r\n            return {\r\n                ...state,\r\n                showSleepPeriod: action.payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default configurationReducer;","import { combineReducers } from 'redux';\r\nimport { persistReducer } from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport createTransform from 'redux-persist/es/createTransform';\r\nimport { decode, encode } from '../utils/persistor';\r\n\r\nimport appointmentReducer from './appointment/appointment.reducer';\r\nimport periodReducer from './period/period.reducer';\r\nimport configurationReducer from './global-configuration/configuration.reducer';\r\n\r\nconst persistConfig = {\r\n    key: 'root',\r\n    storage,\r\n    transforms: [createTransform(encode, decode)]\r\n};\r\n\r\nconst rootReducer = combineReducers({\r\n    period: periodReducer,\r\n    appointment: appointmentReducer,\r\n    config: configurationReducer\r\n});\r\n\r\nexport default persistReducer(persistConfig, rootReducer);","import { createStore } from 'redux';\r\n\r\nimport { persistStore } from 'redux-persist';\r\nimport rootReducer from './root_reducer';\r\nimport logger from 'redux-logger'\r\nimport { applyMiddleware } from '@reduxjs/toolkit';\r\n\r\nconst middlewares = []\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n    //Set Development only middlewares\r\n    middlewares.push(logger)\r\n}\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(...middlewares));\r\n\r\nexport const persistor = persistStore(store);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport \"antd/dist/antd.css\";\r\nimport './index.css';\r\n\r\nimport { Provider } from 'react-redux'\r\nimport { store, persistor } from './redux/store';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate persistor={persistor}>\r\n        <App />\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}