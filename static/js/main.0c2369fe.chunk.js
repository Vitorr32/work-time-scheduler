(this["webpackJsonpwork-time-scheduler"]=this["webpackJsonpwork-time-scheduler"]||[]).push([[0],{283:function(e,t,n){},288:function(e,t,n){},359:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){},430:function(e,t,n){},434:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),o=n.n(i),s=(n.p,n(283),n(265)),c=n(37),u=n(29),d=n(87),l=n(88),p=n(94),h=n(93),m=n(485),b=n(39),f=n(48),j=n(125),O=n(488),v=n(80),g=n(495),y=n(491),x=n(493),S=n(498),D=n(199),w=n(496),k=n(494),C=n(266),A=n(92),T="ADD_APPOINTMENTS",E="UPDATED_APPOINTMENT",P="DELETE_APPOINTMENT",M="ADD_JOB",I="UPDATE_JOB",N="DELETE_JOB",V=function(e){return{type:T,payload:e}},F=function(e){return{type:I,payload:e}},R=n(12),J=n.n(R),H=(n(288),"APPOINTMENT_STATE_FIXED"),_="APPOINTMENT_STATE_TO_DO",Y="APPOINTMENT_STATE_COMPLETED",B="APPOINTMENT_STATE_CURRENT",L="APPOINTMENT_STATE_LATE",q="APPOINTMENT_STATE_DELAY",U="SCHEDULE_WORK_ONLY",W="SCHEDULE_FREE_TIME",G="SCHEDULE_FULL",z="JOB_NOT_STARTED",K=n(499),X=n(500),$=n(501),Q=n(497);function Z(e,t,n,a,r){var i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(j.a)(r,2),d=u[0],l=u[1],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(o&&s){var m=ne(ee(o,s,t,n,e,p,h),e),b=ae(m);if(0!=m.length&&b>=e)return{state:U,periods:m};if(d&&l){var f=e-b,O=ne(ee(d,l,t,n,f,p,h),f),v=ae(O),g=te([].concat(Object(c.a)(m),Object(c.a)(O)));return 0!=O.length&&b+v>=e?{state:W,periods:g}:{state:G,periods:g}}console.error("It was nescessary to use free time, but there was no free period start or end configured!")}else console.error("There was no work period start or end configured!")}function ee(e,t,n,a,r,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=[],u=i?i.clone():J()().add(1,"day").startOf("day").set("hour",e),d=t>e?u.clone().set("hour",t):u.clone().add(1,"day").set("hour",t),l=u.clone().set("hour",e),p={start:null,end:null,hours:0};u.isSameOrBefore(n);){if(0!==s&&p.start&&p.hours+1>=s&&(p.end=u.clone(),p.hours++,c.push(Object.assign({},p)),p={start:null,end:null,hours:0}),!o&&0!=r)if(p.start){if(ae([].concat(c,[{hours:1+p.hours}]))>=r){p.end=u.clone(),p.hours++,c.push(Object.assign({},p)),p={start:null,end:null,hours:0};break}}else if(ae(c)>=r)break;var h=a.find((function(e){return!!u.isBetween(e.startDate,e.endDate,void 0,"[)")}));if(h)p.start&&(p.end=u.clone(),p.hours++,c.push(Object.assign({},p)),p={start:null,end:null,hours:0}),h.endDate.isSameOrAfter(d)?(d=d.add(1,"day"),l=l.add(1,"day"),u=l.clone()):u=u.set("hour",h.endDate.get("hour"));else{if(u.isSameOrAfter(n)){p.start&&(p.end=u.clone(),p.hours++,c.push(Object.assign({},p)));break}u.isSameOrAfter(d)?(p.start&&(p.end=u.clone(),p.hours++,c.push(Object.assign({},p)),p={start:null,end:null,hours:0}),d=d.add(1,"day"),l=l.add(1,"day"),u=l.clone()):(p.start?(p.end=u.clone(),p.hours++):p.start=u.clone(),u=u.add(1,"hour"))}}return c}function te(e){var t=[],n=[];return e.forEach((function(a,r){if(!n.includes(r)){var i=e.findIndex((function(e){return a.end.isSame(e.start)}));-1!==i&&(n.push(i),a.end=e[i].end,a.hours=a.end.diff(a.start,"hours")),t.push(a)}})),t}function ne(e,t){if(ae(e)<=t)return e;e.sort((function(e,n){return e.hours>n.hours||e.hours===t?-1:n.hours>e.hours?1:e.start.isBefore(n.start)?-1:n.start.isBefore(e.start)?1:0}));for(var n=t,a=[],r=0;r<e.length;r++){var i=e[r];if(i.hours===n){a.push(i);break}if(i.hours>n){var o=i.hours-n;i.hours=i.hours-o,i.end=i.end.subtract(o,"hours"),a.push(i);break}a.push(i),n-=i.hours}return a}function ae(e){return e.reduce((function(e,t){return{hours:e.hours+t.hours}}),{hours:0}).hours}function re(e,t){var n=e.start,a=e.end,r=e.hours,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{startDate:n,endDate:a,state:i?H:_,hours:r,id:"job_"+t+"_app_"+Object(Q.a)(),jobId:t}}var ie=n(9),oe=O.a.RangePicker,se={labelCol:{span:8},wrapperCol:{span:16}},ce=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).formRef=r.a.createRef(),a.state={isModalVisible:!1,isFutherActionModalVisible:!1,isRecurrentEvent:!1,appointmentPreview:null,appointmentPeriods:[],appointmentSuccessful:!1,showTimeToDueDateInputField:!1,showSpecificDateInput:!1},a}return Object(l.a)(n,[{key:"resetFormState",value:function(){this.setState({isModalVisible:!1,isFutherActionModalVisible:!1,isRecurrentEvent:!1,appointmentPreview:null,appointmentPeriods:[],appointmentSuccessful:!1,showTimeToDueDateInputField:!1,showSpecificDateInput:!1})}},{key:"onFormSubmit",value:function(e){var t=J()().format("x");e.recurrentEvent?this.onCreateRecurrentAppointment(t,e):this.onCreateJob(t,e),this.resetFormState(),this.formRef.current.resetFields()}},{key:"onCreateRecurrentAppointment",value:function(e,t){var n=t.description,a=t.name,r=t.recurrentEndDate,i=t.recurrentPeriod,o=t.recurrentTimeFrame,s=t.weekDay,c=t.recurrentEventTime,u=c[0].get("hour"),d=c[1].get("hour"),l="date"===o?r:J()().startOf("day").add(i,o).set("hour",d),p=this.createAppointmentsOfRecurrentJob(u,d,l,s,e),h={id:e,name:a,appointments:p.map((function(e){return e.id})),description:n,dueDate:l,state:"JOB_IS_RECURRENT_EVENT",recurrentEvent:!0,weekDay:s};this.props.addJob(h),this.props.addAppointments(p)}},{key:"onCreateJob",value:function(e,t){var n=this.state.appointmentPeriods.map((function(t){return re(t,e)})),a={id:e,name:t.name,appointments:n.map((function(e){return e.id})),price:t.price,description:t.description,dueDate:t.dueDate?t.dueDate.startOf("hour"):t.period&&t.timeFrame?J()().add(t.period,t.timeFrame).startOf("hour"):null,totalHours:t.hours,state:z,recurrentEvent:!1};this.props.addJob(a),this.props.addAppointments(n)}},{key:"createAppointmentsOfRecurrentJob",value:function(e,t,n,a,r){for(var i=J()().startOf("day"),o=[];i.isSameOrBefore(n);)a.includes(i.isoWeekday())&&o.push(re({start:i.clone().set("hour",e),end:i.clone().set("hour",t),hours:t-e},r,!0)),i.add(1,"day");return o}},{key:"previewPeriods",value:function(e,t){var n=Object(j.a)(e,1)[0];if(!t.find((function(e){return e.name.includes("recurrentEvent")})).value){var a=t.find((function(e){return e.name.includes("hours")})),r=t.find((function(e){return e.name.includes("continuousPeriod")})),i=t.find((function(e){return e.name.includes("dueDate")})),o=t.find((function(e){return e.name.includes("timeFrame")})),s=t.find((function(e){return e.name.includes("period")})),c=this.props,u=c.appointments,d=c.workStart,l=c.workEnd,p=c.freeStart,h=c.freeEnd;if(n.name.includes("hours")||n.name.includes("dueDate")||n.name.includes("timeFrame")||n.name.includes("period")){var m=this.configureTargetDate(i,o,s);if(a.value&&m){var b=Z(a.value,m,u,[d,l],[p,h],null,r.value);if(!b)return void console.error("Error on saving the periods");switch(b.state){case U:this.setState({appointmentPreview:"The job can be sucessfully distributed in the work period",appointmentPeriods:b.periods,appointmentSuccessful:!0});break;case W:this.setState({appointmentPreview:"The job will invade some of your free time period",appointmentPeriods:b.periods,appointmentSuccessful:!0});break;case G:this.setState({appointmentPreview:"The job could not be distributed into your work/free time, further action will be required on submit",appointmentPeriods:b.periods,appointmentSuccessful:!1})}}else this.setState({appointmentPreview:"",appointmentPeriods:[]})}}}},{key:"configureTargetDate",value:function(e,t,n){return e&&e.value?e.value.startOf("hour"):t&&t.value&&n&&n.value?J()().add(t.value,n.value).startOf("hour"):null}},{key:"onFutherActionSet",value:function(e){var t=this,n=this.props,a=n.appointments,r=n.workStart,i=n.workEnd,o=n.freeStart,s=n.freeEnd,u=this.formRef.current.getFieldsValue(),d=u.dueDate,l=u.hours,p=u.continuousPeriod,h=ee(e?Math.min(r,o):Math.max(i,s),e?Math.max(i,s):Math.min(r,o),e?d.set("year",9999).startOf("hour"):d.startOf("hour"),[].concat(Object(c.a)(a),Object(c.a)(this.state.appointmentPeriods)),l-ae(this.state.appointmentPeriods),e?d.startOf("hour"):J()().startOf("day").set("hour",Math.max(i,s)),p),m=te([].concat(Object(c.a)(h),Object(c.a)(this.state.appointmentPeriods)));this.setState({appointmentPeriods:m,appointmentSuccessful:!0,appointmentPreview:"",isModalVisible:!1,isFutherActionModalVisible:!1},(function(){return t.onFormSubmit(t.formRef.current.getFieldsValue())}))}},{key:"allowFormToBeSubmitted",value:function(){var e=this.props,t=e.workStart,n=e.workEnd,a=e.freeStart,r=e.freeEnd;return!!(t&&n&&a&&r)}},{key:"validateDueDate",value:function(e,t){return J()().isSameOrAfter(t)?Promise.reject("The due date needs to be after now!"):Promise.resolve()}},{key:"render",value:function(){var e=this,t=this.allowFormToBeSubmitted();return Object(ie.jsxs)(r.a.Fragment,{children:[Object(ie.jsx)(v.a,{type:"primary",onClick:function(){return e.setState({isModalVisible:!0})},children:"Add Event"}),Object(ie.jsx)(g.a,{title:"Add Event",visible:this.state.isModalVisible,okText:"Submit",onCancel:this.resetFormState.bind(this),onOk:function(){e.formRef.current.validateFields().then((function(t){e.state.appointmentSuccessful||e.state.isRecurrentEvent?e.onFormSubmit(t):e.setState({isFutherActionModalVisible:!0})})).catch((function(e){console.log("Validate Failed:",e)}))},okButtonProps:{disabled:!t},children:Object(ie.jsxs)(y.a,Object(u.a)(Object(u.a)({},se),{},{ref:this.formRef,name:"eventForm",initialValues:{continuousPeriod:!0},onFinish:function(t){return e.onFormSubmit(t)},onFieldsChange:this.previewPeriods.bind(this),children:[Object(ie.jsx)(y.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"The event name is required"}],children:Object(ie.jsx)(x.a,{disabled:!t})}),Object(ie.jsx)(y.a.Item,{label:"Recurrent Event",name:"recurrentEvent",valuePropName:"checked",children:Object(ie.jsx)(S.a,{disabled:!t,onChange:function(t){return e.setState({isRecurrentEvent:t.target.checked})}})}),Object(ie.jsx)(y.a.Item,{label:"Description",name:"description",children:Object(ie.jsx)(x.a.TextArea,{disabled:!t})}),this.state.isRecurrentEvent?Object(ie.jsxs)(r.a.Fragment,{children:[Object(ie.jsx)(y.a.Item,{label:"Time",name:"recurrentEventTime",rules:[{required:!0,message:"The recurrent event time range is required!"}],children:Object(ie.jsx)(oe,{format:"HH:00"})}),Object(ie.jsx)(y.a.Item,{label:"Week Days",name:"weekDay",rules:[{required:!0,message:"At least one day must be selected for the event to happen!"}],children:Object(ie.jsx)(S.a.Group,{options:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}]})}),Object(ie.jsx)(y.a.Item,{label:"Recurrency Duration",children:Object(ie.jsxs)(x.a.Group,{compact:!0,children:[this.state.showSpecificDateInput?Object(ie.jsx)(y.a.Item,{name:"recurrentEndDate",noStyle:!0,rules:[{required:!0,message:"The period value is required"}],children:Object(ie.jsx)(D.a,{disabled:!t,style:{width:"50%"},format:"DD/MM/YYYY HH:00",showTime:!0})}):Object(ie.jsx)(y.a.Item,{name:"recurrentPeriod",noStyle:!0,rules:[{required:!0,message:"The period value is required"}],children:Object(ie.jsx)(w.a,{disabled:!t,style:{width:"50%"},placeholder:"Period value"})}),Object(ie.jsx)(y.a.Item,{name:"recurrentTimeFrame",noStyle:!0,rules:[{required:!0,message:"Please select the time frame to be used"}],children:Object(ie.jsxs)(k.a,{style:{width:"50%"},disabled:!t,placeholder:"Time frame",onChange:function(t){return e.setState({showSpecificDateInput:"date"===t})},children:[Object(ie.jsx)(k.a.Option,{value:"week",children:"Week(s)"}),Object(ie.jsx)(k.a.Option,{value:"month",children:"Month(s)"}),Object(ie.jsx)(k.a.Option,{value:"quarter",children:"Quarter(s)"}),Object(ie.jsx)(k.a.Option,{value:"year",children:"Year(s)"}),Object(ie.jsx)(k.a.Option,{value:"date",children:"Specifc Date"})]})})]})}),Object(ie.jsx)("span",{className:"message",children:"The recurrent events will ignore jobs appointments when setting the event, so there may be some overlaps to be fixed manually"})]}):Object(ie.jsxs)(r.a.Fragment,{children:[Object(ie.jsx)(y.a.Item,{label:"Price",name:"price",children:Object(ie.jsx)(w.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},min:0,precision:2,disabled:!t})}),Object(ie.jsx)(y.a.Item,{label:"Estimated Hours",name:"hours",rules:[{required:!0,message:"The ETA is required to allow the scheduler to distribute time"}],children:Object(ie.jsx)(w.a,{disabled:!t,min:0})}),Object(ie.jsxs)("div",{className:"due-date-wrapper",children:[this.state.showTimeToDueDateInputField?Object(ie.jsx)(y.a.Item,{label:"Time to Due Date",children:Object(ie.jsxs)(x.a.Group,{compact:!0,children:[Object(ie.jsx)(y.a.Item,{name:["timeFrame"],noStyle:!0,rules:[{required:!0,message:"Please select the time frame to be used"}],children:Object(ie.jsxs)(k.a,{placeholder:"Time frame",children:[Object(ie.jsx)(k.a.Option,{value:"hour",children:"Hour(s)"}),Object(ie.jsx)(k.a.Option,{value:"day",children:"Day(s)"})]})}),Object(ie.jsx)(y.a.Item,{name:["period"],noStyle:!0,rules:[{required:!0,message:"The period value is required"}],children:Object(ie.jsx)(w.a,{style:{width:"50%"},placeholder:"Period hours/days"})})]})}):Object(ie.jsx)(y.a.Item,{label:"Due Date",name:"dueDate",rules:[{required:!0,message:"The dude date is required"},{validator:this.validateDueDate}],children:Object(ie.jsx)(D.a,{disabled:!t,format:"DD/MM/YYYY HH:00",showTime:!0})}),Object(ie.jsx)(C.a,{title:"Change to the 'Time to due Date' input that allows you to insert the time to the due date instead of the specific date",children:Object(ie.jsx)(K.a,{className:"due-date-toogle",style:{right:this.state.showTimeToDueDateInputField?"20px":"80px"},onClick:function(){return e.setState({showTimeToDueDateInputField:!e.state.showTimeToDueDateInputField})}})})]}),Object(ie.jsx)(y.a.Item,{label:"Continuous Priority",valuePropName:"checked",name:"continuousPeriod",children:Object(ie.jsx)(C.a,{title:"Whether the Scheduler should focus on finding continuous periods or just distribute the event in the open periods avaliable",children:Object(ie.jsx)(S.a,{disabled:!t})})})]}),Object(ie.jsx)("span",{className:"message",children:this.state.appointmentPreview}),t?null:Object(ie.jsx)("span",{className:"message",children:"Please set the work and free period before attemping to add events to your schedule"})]}))}),Object(ie.jsx)(g.a,{visible:this.state.isFutherActionModalVisible,footer:[Object(ie.jsx)(C.a,{title:"Delay",children:Object(ie.jsx)(v.a,{type:"primary",onClick:function(){return e.onFutherActionSet(!0)},icon:Object(ie.jsx)(X.a,{})})},"delay"),Object(ie.jsx)(C.a,{title:"Overwrite Sleep",children:Object(ie.jsx)(v.a,{type:"primary",onClick:function(){return e.onFutherActionSet(!1)},icon:Object(ie.jsx)($.a,{})})},"overwrite_sleep"),Object(ie.jsx)(v.a,{onClick:function(){return e.setState({isFutherActionModalVisible:!1})},children:"Cancel"},"back")],children:Object(ie.jsx)("p",{children:"The appointment submitted can't be concluded during your work and free period, what should the scheduler do to allow for this job to be scheduled?"})})]})}}]),n}(r.a.Component),ue=Object(A.b)((function(e){return{workStart:e.period.workStart,workEnd:e.period.workEnd,freeStart:e.period.freeStart,freeEnd:e.period.freeEnd,appointments:e.appointment.appointments,jobs:e.appointment.jobs}}),(function(e){return{addAppointments:function(t){return e(V(t))},addJob:function(t){return e({type:M,payload:t})}}}))(ce),de="SET_WORK_PERIOD",le="SET_FREE_PERIOD",pe="WORK_PERIOD",he="FREE_PERIOD",me=(n(359),O.a.RangePicker),be=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).formRef=r.a.createRef(),a.state={isModalVisible:!1},a}return Object(l.a)(n,[{key:"onFormSubmit",value:function(e){switch(this.props.periodType){case pe:this.props.setWorkPeriod({start:e.periodRange[0].get("hours"),end:e.periodRange[1].get("hours")});break;case he:this.props.setFreePeriod({start:e.periodRange[0].get("hours"),end:e.periodRange[1].get("hours")})}this.setState({isModalVisible:!1})}},{key:"getPeriodLabel",value:function(e){switch(e){case he:return"Free";case pe:return"Work"}}},{key:"render",value:function(){var e=this;return Object(ie.jsxs)("div",{children:[Object(ie.jsxs)(v.a,{onClick:function(){return e.setState({isModalVisible:!0})},children:[this.getPeriodLabel(this.props.periodType)," Period"]}),Object(ie.jsx)(g.a,{title:"".concat(this.getPeriodLabel(this.props.periodType)," Period"),visible:this.state.isModalVisible,okText:"Submit",onCancel:function(){return e.setState({isModalVisible:!1})},onOk:function(){e.formRef.current.validateFields().then((function(t){e.onFormSubmit(t)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(ie.jsx)(y.a,{ref:this.formRef,name:"periodForm",initialValues:{periodRange:[J()().startOf("day").set("hours",this.props.start),J()().startOf("day").set("hours",this.props.end)],remember:!0},onFinish:function(t){return e.onFormSubmit(t)},children:Object(ie.jsx)(y.a.Item,{name:"periodRange",rules:[{required:!0,message:"The range of the period is required!"}],children:Object(ie.jsx)(me,{format:"HH:00"})})})})]})}}]),n}(r.a.Component),fe=Object(A.b)((function(e,t){switch(t.periodType){case pe:return{start:e.period.workStart,end:e.period.workEnd};case he:return{start:e.period.freeStart,end:e.period.freeEnd};default:return{}}}),(function(e){return{setWorkPeriod:function(t){return e({type:de,payload:t})},setFreePeriod:function(t){return e({type:le,payload:t})}}}))(be),je=(n(360),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(d.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"onFormSubmit",value:function(){}},{key:"render",value:function(){return Object(ie.jsxs)("header",{children:[Object(ie.jsx)("h2",{children:"Work Scheduler"}),Object(ie.jsxs)("div",{className:"button-group",children:[Object(ie.jsx)(fe,{periodType:pe}),Object(ie.jsx)(fe,{periodType:he}),Object(ie.jsx)(ue,{})]})]})}}]),n}(r.a.Component)),Oe=n(502),ve=n(126),ge=n(165),ye=n(503),xe=n(504),Se=n(505),De=n(506),we=(n(361),n(487)),ke=n(486),Ce=n(489),Ae=n(490),Te=n(100),Ee=n.n(Te),Pe=n(192),Me=n.n(Pe),Ie="SET_SHOW_SLEEP_PERIOD_CONFIG",Ne=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).partitionForm=r.a.createRef(),a.state={currentDay:J()().startOf("week").toDate(),currentViewName:"Day",appointmentUpdateInterval:null,isPartitionModalVisible:!1,partitionAppointmentData:null,partitionHourValue:"",isRealocateModalVisible:!1,realocatedState:{state:"",periods:[],appointment:null,job:null},isAppointmentTooltipVisible:!1,appointmentTooltipMetadata:{target:null,data:{}},isMergeModalVisible:!1,mergeState:null,isRecurrentChangeModalVisible:!1,recurrentChangeState:null},a.toggleVisibility=function(){a.setState({isAppointmentTooltipVisible:!a.state.isAppointmentTooltipVisible})},a.onAppointmentMetaChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{},target:null},t=e.data,n=e.target;a.setState({appointmentTooltipMetadata:{data:t,target:n}})},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.onUpdateAppointmentsState()}},{key:"componentWillUnmount",value:function(){this.state.appointmentUpdateInterval&&(clearTimeout(this.state.appointmentUpdateInterval),this.setState({appointmentUpdateInterval:null}))}},{key:"onUpdateAppointmentsState",value:function(){var e=this;this.props.appointments.forEach((function(t){var n=e.checkStateOfAppointment(t);t.state!==n&&(console.log("New state"+n+"for appoitnment"+t.id),t.state=n,e.props.updateAppointment(t))}));var t=J()().add(1,"hour").startOf("hour").add(1,"second").diff(J()(),"milliseconds");this.setState({appointmentUpdateInterval:setTimeout((function(){return e.onUpdateAppointmentsState()}),t)})}},{key:"checkStateOfAppointment",value:function(e){if(e.state===Y)return Y;if(e.state===H)return H;var t=this.findJobOfAppointment(e);return e.startDate.isAfter(t.dueDate)?q:e.endDate.isBefore(J()())?L:e.startDate.isAfter(J()())?_:B}},{key:"TableTimeCellRenderer",value:function(e){var t=this.props,n=t.workStart,a=t.workEnd,r=t.freeStart,i=t.freeEnd,o=J()(e.startDate),s=J()(e.endDate),c="sleep-period";return this.isHoursBetween(n,a,o,s)?c="work-period":this.isHoursBetween(r,i,o,s)&&(c="free-period"),Object(ie.jsx)(f.e.TimeTableCell,Object(u.a)(Object(u.a)({},e),{},{className:c}))}},{key:"isHoursBetween",value:function(e,t,n,a){var r=n.clone().startOf("day").set("hour",e),i=a.clone().startOf("day").set("hour",t);return n.isBetween(r,i,void 0,"[)")&&a.isBetween(r,i,void 0,"(]")}},{key:"getCustomAppointmentContent",value:function(e){var t=e.data,n=e.formatDate,a=this.findJobOfAppointment(t);return Object(ie.jsx)(f.b.AppointmentContent,Object(u.a)(Object(u.a)({},e),{},{style:{height:"100%"},children:Object(ie.jsxs)("div",{className:"app-appointment-content",children:[Object(ie.jsx)("div",{className:"title",children:a.name}),a.price?Object(ie.jsxs)("div",{className:"value-wrapper",children:["$ ",a.price.toFixed(2)]}):null,t.state!==H?Object(ie.jsxs)("span",{children:["Due to: ",a.dueDate.format("DD/MM/YYYY HH:00")]}):null,Object(ie.jsxs)("div",{className:"hour-wrapper",children:[Object(ie.jsx)("span",{children:n(t.startDate,{hour:"numeric",minute:"numeric"})}),Object(ie.jsx)("span",{style:{padding:"0px 3px"},children:" - "}),Object(ie.jsx)("span",{children:n(t.endDate,{hour:"numeric",minute:"numeric"})})]})]})}))}},{key:"getTooltipContent",value:function(e){var t=this,n=e.appointmentData,a=e.formatDate,r=this.findJobOfAppointment(n);return r?(Oe.a,Object(ie.jsxs)("div",{className:"tooltip-content",children:[Object(ie.jsxs)(we.a,{container:!0,alignItems:"flex-start",className:"meta",children:[Object(ie.jsx)(we.a,{item:!0,xs:2,style:{display:"flex",justifyContent:"center"},children:Object(ie.jsx)(Ce.a,{className:"lens",style:{color:n.state===_?"#1890ff":n.state===H?"#039be5":n.state===Y?"#a4b1db":n.state===B?"green":n.state===L?"orange":"crimson"}})}),Object(ie.jsxs)(we.a,{item:!0,xs:10,children:[Object(ie.jsx)("div",{className:"title",children:r.name}),Object(ie.jsx)("div",{children:n.startDate.format("dddd, DD MMMM YYYY")})]})]}),Object(ie.jsxs)(we.a,{container:!0,alignItems:"center",style:{marginTop:"10px"},children:[Object(ie.jsx)(we.a,{item:!0,xs:2,style:{display:"flex",justifyContent:"center",color:"gray"},children:Object(ie.jsx)(ve.a,{style:{fontSize:"24px"}})}),Object(ie.jsx)(we.a,{item:!0,xs:10,children:Object(ie.jsx)("div",{children:"".concat(a(n.startDate,{hour:"numeric",minute:"numeric"}),"\n                            - ").concat(a(n.endDate,{hour:"numeric",minute:"numeric"}))})})]}),!n.state===H?Object(ie.jsxs)(we.a,{container:!0,alignItems:"center",children:[Object(ie.jsx)(we.a,{item:!0,xs:2,style:{display:"flex",justifyContent:"center",color:"gray"},children:Object(ie.jsx)(Ae.a,{style:{fontSize:"24px"}})}),Object(ie.jsx)(we.a,{item:!0,xs:10,children:Object(ie.jsxs)("span",{children:["Due at ",r.dueDate.format("dddd, DD MMMM YYYY HH:00")]})})]}):null,r.description?Object(ie.jsx)("p",{className:"description",children:r.description}):null,Object(ie.jsxs)("div",{className:"tooltip-wrapper",children:[Object(ie.jsx)(v.a,{disabled:n.state===Y||n.state===H,onClick:function(){return t.onCompleteTheAppointment(n)},icon:Object(ie.jsx)(ge.a,{}),size:"large",children:"Complete"}),Object(ie.jsx)(v.a,{disabled:n.state===H,onClick:function(){return t.onDelayTheAppointment(n)},icon:Object(ie.jsx)(X.a,{}),size:"large",children:"Delay"}),Object(ie.jsx)(v.a,{disabled:n.state===H,onClick:function(){return t.onFinishTheAppointment(n)},icon:Object(ie.jsx)(ye.a,{}),size:"large",children:"Finish"})]})]})):null}},{key:"onCompleteTheAppointment",value:function(e){var t=this.props,n=t.appointments,a=t.jobs,r=Object(c.a)(n),i=r.findIndex((function(t){return t.id===e.id}));if(-1!==i){r[i].state=Y;var o=a.find((function(t){return t.id===e.jobId}));this.shouldDeleteJob(o,r)?(this.props.deleteJob(o),this.toggleVisibility(),this.onAppointmentMetaChange()):(this.props.updateAppointment(r[i]),this.props.updateJob(this.onUpdateJobStateOnAppointmentChange(o,r)))}else console.error("Unknown appointment was completed!")}},{key:"onUpdateJobStateOnAppointmentChange",value:function(e,t){var n=t.filter((function(t){return e.appointments.includes(t.id)}));return 0===n.filter((function(e){return e.state===_||e.state===B||e.state===q||e.state===L})).length?e.state="JOB_COMPLETED":0===n.filter((function(e){return e.state===Y})).length?e.state=z:e.state="JOB_ON_GOING",e}},{key:"shouldDeleteJob",value:function(e,t){return 0===t.filter((function(t){return e.appointments.includes(t.id)})).filter((function(e){return e.state===_||e.state===B||e.state===q||e.state===L||e.state===H})).length}},{key:"onDelayTheAppointment",value:function(e){var t=this.props,n=t.workStart,a=t.workEnd,r=t.freeStart,i=t.freeEnd,o=t.appointments,s=this.findJobOfAppointment(e),c=Z(e.hours,s.dueDate,o,[n,a],[r,i],e.endDate);c.state===W||c===G?(this.setState({realocatedState:Object(u.a)(Object(u.a)({},c),{},{appointment:e,job:s}),isRealocateModalVisible:!0}),this.toggleVisibility(),this.onAppointmentMetaChange()):this.onConfirmationOfRealocation(Object(u.a)(Object(u.a)({},c),{},{appointment:e,job:s}))}},{key:"onConfirmationOfRealocation",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t||this.state.realocatedState,a=n.periods,r=n.job,i=n.appointment,o=a.map((function(e){return re(e,r.id)})),s=r.appointments.findIndex((function(e){return e===i.id}));(e=r.appointments).splice.apply(e,[s,1].concat(Object(c.a)(o.map((function(e){return e.id}))))),this.props.updateJob(r),this.props.deleteAppointment([i.id]),this.props.addAppointments(o),this.setState({isRealocateModalVisible:!1,realocatedState:null})}},{key:"onFinishTheAppointment",value:function(e){var t=this.findJobOfAppointment(e);this.props.deleteJob(t),this.toggleVisibility(),this.onAppointmentMetaChange()}},{key:"getAppointmentComponet",value:function(e){var t,n=this,a=e.children,r=e.style;switch(e.data.state){case Y:t="appointment-done";break;case H:t="appointment-fixed";break;case B:t="appointment-active";break;case L:t="appointment-late";break;case q:t="appointment-delay"}return Object(ie.jsx)(f.b.Appointment,Object(u.a)(Object(u.a)({},e),{},{className:t,style:Object(u.a)({},r),onClick:function(e){for(var t=e.target,a=e.data,r=t;"absolute"!==(r=r.parentElement).style.position;);n.onAppointmentMetaChange({target:r,data:a}),n.toggleVisibility()},children:a}))}},{key:"findJobOfAppointment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.props.jobs.findIndex((function(t){return t.id===e.jobId})):this.props.jobs.find((function(t){return t.id===e.jobId}))}},{key:"onAppointmentChangeCommited",value:function(e){var t=this,n=this.props.appointments;if(e.deleted){var a=n.find((function(t){return t.id===e.deleted})),r=this.findJobOfAppointment(a);if(a.state===H)return void this.setState({isRecurrentChangeModalVisible:!0,recurrentChangeState:{previousStart:a.startDate,previosEnd:a.endDate,job:r,appointment:a,change:"DELETED"}});var i=Object(c.a)(n);i.splice(i.findIndex((function(t){return t.id===e.deleted})),1),this.shouldDeleteJob(r,i)?this.props.deleteJob(r):(r.appointments.splice(r.appointments.findIndex((function(t){return t===e.deleted})),1),this.props.deleteAppointment([e.deleted]),this.props.updateJob(r)),this.toggleVisibility(),this.onAppointmentMetaChange()}e.changed&&Object.keys(e.changed).forEach((function(a){var r=e.changed[a],i=r.endDate,o=r.startDate,s=n.find((function(e){return e.id===a})),c=J()(o),d=J()(i);if(24===d.diff(c,"hours")&&(c.set("hour",t.props.workStart),d=c.clone().set("hour",t.props.workStart+s.hours)),!c.isSame(s.startDate))if(s.state!==H||s.startDate.get("day")!==c.get("day")){var l=n.find((function(e){return!(!c.isBetween(e.startDate,e.endDate)&&!d.isBetween(e.startDate,e.endDate))&&e.jobId===s.jobId}));l?t.setState({isMergeModalVisible:!0,mergeState:{collidedAppointment:l,appointment:s,updatedAppointment:Object(u.a)(Object(u.a)({},s),{},{startDate:c,endDate:d,state:t.checkStateOfAppointment(s)}),job:t.findJobOfAppointment(s)}}):(s.startDate=c,s.endDate=d,s.state=t.checkStateOfAppointment(s),t.props.updateAppointment(s))}else{var p=t.findJobOfAppointment(s);t.setState({isRecurrentChangeModalVisible:!0,recurrentChangeState:{previousStart:s.startDate,previosEnd:s.endDate,newStart:c,newEnd:d,job:p,appointment:s,change:"CHANGED"}})}}))}},{key:"onAppointmentPartitionSet",value:function(e){var t,n=this,a=e.hour,r=this.props,i=r.appointments,o=r.deleteAppointment,s=r.updateJob,u=r.addAppointments,d=this.state.partitionAppointmentData,l=i.slice();l.splice(l.findIndex((function(e){return e.id===d.id})),1);var p=this.findJobOfAppointment(d),h=ee(d.startDate.get("hour"),d.endDate.get("hour"),d.endDate,l,0,d.startDate,!1,a).map((function(e){return re(e,p.id)}));p.appointments.splice(p.appointments.findIndex((function(e){return e===d.id})),1),(t=p.appointments).push.apply(t,Object(c.a)(h.map((function(e){return e.id})))),h=h.map((function(e){var t=n.checkStateOfAppointment(e);return e.state!==t&&(e.state=t),e})),o([d.id]),u(h),s(p),this.setState({partitionAppointmentData:null})}},{key:"onAppointmentMerge",value:function(e,t){var n=e.collidedAppointment,a=e.appointment,r=e.updatedAppointment,i=e.job,o=this.props,s=o.deleteAppointment,c=o.updateAppointment;t?(i.appointments.splice(i.appointments.findIndex((function(e){return e===a.id})),1),n.hours+=a.hours,n.endDate.add(a.hours,"hours"),s([a.id]),c(n),F(i)):c(r),this.setState({isMergeModalVisible:!1,mergeState:null})}},{key:"validateHourInserted",value:function(e,t){if(!t)return Promise.resolve();try{parseInt(t,10)}catch(n){return Promise.reject("The hours value need to be a number!")}return this.state.partitionAppointmentData.hours<=t?Promise.reject("You can't partition an appointment by the same or higher number of hours!"):t<=0?Promise.reject("The number of hour should be non-negative and non-zero!"):Promise.resolve()}},{key:"getToolbarFreeSpaceComponent",value:function(){var e=this;return Object(ie.jsx)(f.i.FlexibleSpace,{className:"toolbar-flexible-space",children:null!==this.props.workStart&&null!==this.props.freeStart?Object(ie.jsx)(Me.a,{checked:this.props.showSleepPeriod,onChange:function(t){(0,e.props.setShowSleepPeriod)(t.target.checked)},children:"Show Sleep Period"}):null})}},{key:"getViewSwitcherComponent",value:function(e){var t=this;return Object(ie.jsx)(f.j.Switcher,Object(u.a)(Object(u.a)({},e),{},{onChange:function(e){return t.setState({currentViewName:e})}}))}},{key:"getNavigatorRootComponent",value:function(e){return Object(ie.jsx)(f.d.Root,Object(u.a)({className:"date-navigator-root"},e))}},{key:"getDateNavigatorComponent",value:function(e){var t=this,n="forward"===e.type;return Object(ie.jsxs)("div",{className:"navigation-pair-button-wrapper ".concat(n?"":"reverse"),children:[Object(ie.jsx)("button",{onClick:function(){return t.onNaviagateDate(e.type)},children:n?Object(ie.jsx)(xe.a,{}):Object(ie.jsx)(Se.a,{})}),"Day"===this.state.currentViewName?Object(ie.jsx)("button",{onClick:function(){return t.onNaviagateDate(e.type,!0)},children:"forward"===e.type?Object(ie.jsx)(ye.a,{}):Object(ie.jsx)(De.a,{})}):null]})}},{key:"onNaviagateDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.currentDay;switch(this.state.currentViewName){case"Day":return void this.setState({currentDay:"forward"===e?J()(n).add(t?7:1,"day").toDate():J()(n).subtract(t?7:1,"day").toDate()});case"Month":return void this.setState({currentDay:"forward"===e?J()(n).add(1,"month").toDate():J()(n).subtract(1,"month").toDate()})}}},{key:"onRecurrentAppointmentChange",value:function(e,t){var n=this,a=e.previousStart,r=(e.previosEnd,e.newStart),i=e.newEnd,o=e.job,s=e.appointment,u=e.change;switch(t){case"THIS":if("CHANGED"===u)s.startDate=r,s.endDate=i,this.props.updateAppointment(s);else{var d=Object(c.a)(this.props.appointments);d.splice(d.findIndex((function(e){return e.id===s.id})),1),this.shouldDeleteJob(o,d)?this.props.deleteJob(o):(o.appointments.splice(o.appointments.findIndex((function(e){return e===s.id})),1),this.props.deleteAppointment([s.id]),this.props.updateJob(o))}break;case"DAY":var l=this.findAllAppointmentsOfJobInWeekDay(o,a.isoWeekday());if("CHANGED"===u)l.forEach((function(e){e.startDate.set("hour",r.get("hour")),e.endDate.set("hour",i.get("hour")),n.props.updateAppointment(e)}));else{var p=Object(c.a)(this.props.appointments),h=Object.assign({},o);l.forEach((function(e){p.splice(p.findIndex((function(t){return t.id===e.id})),1)})),this.shouldDeleteJob(o,p)?this.props.deleteJob(o):(l.forEach((function(e){h.appointments.splice(h.appointments.findIndex((function(t){return t===e.id})),1)})),this.props.deleteAppointment(l.map((function(e){return e.id}))),this.props.updateJob(h))}break;case"ALL":var m=this.props.appointments.filter((function(e){return o.appointments.find((function(t){return t===e.id}))}));"CHANGED"===u?m.forEach((function(e){e.startDate.set("hour",r.get("hour")),e.endDate.set("hour",i.get("hour")),n.props.updateAppointment(e)})):this.props.deleteJob(o)}this.setState({isRecurrentChangeModalVisible:!1,recurrentChangeState:null})}},{key:"findAllAppointmentsOfJobInWeekDay",value:function(e,t){return this.props.appointments.filter((function(n){return n.startDate.isoWeekday()===t&&e.appointments.find((function(e){return e===n.id}))}))}},{key:"getHeaderComponent",value:function(e){var t=this,n=(e.children,e.appointmentData),a=(e.classes,Object(s.a)(e,["children","appointmentData","classes"]));return Object(ie.jsx)(f.a.Header,Object(u.a)(Object(u.a)({},a),{},{appointmentData:n,children:!n.state===H?Object(ie.jsx)(ke.a,{className:"icon-button-wrapper",onClick:function(){t.setState({isPartitionModalVisible:!0,partitionAppointmentData:n}),t.toggleVisibility(),t.onAppointmentMetaChange()},children:Object(ie.jsx)(Oe.a,{})}):null}))}},{key:"render",value:function(){var e=this;return Object(ie.jsxs)("div",{id:"home-wrapper",children:[Object(ie.jsx)(je,{}),Object(ie.jsx)(m.a,{children:Object(ie.jsxs)(f.h,{locale:"en-UK",data:this.props.appointments,children:[Object(ie.jsx)(b.s,{currentDate:this.state.currentDay,currentViewName:this.state.currentViewName,onCurrentDateChange:function(t){return e.setState({currentDay:t})}}),Object(ie.jsx)(b.k,{onCommitChanges:this.onAppointmentChangeCommited.bind(this)}),Object(ie.jsx)(b.m,{}),Object(ie.jsx)(f.c,{}),Object(ie.jsx)(f.e,{displayName:"Week",cellDuration:60,intervalCount:7,startDayHour:this.props.calendarViewHourStart,endDayHour:this.props.calendarViewHourEnd,timeTableCellComponent:this.TableTimeCellRenderer.bind(this)}),Object(ie.jsx)(f.g,{}),Object(ie.jsx)(f.i,{flexibleSpaceComponent:this.getToolbarFreeSpaceComponent.bind(this)}),Object(ie.jsx)(f.j,{switcherComponent:this.getViewSwitcherComponent.bind(this)}),Object(ie.jsx)(f.d,{rootComponent:this.getNavigatorRootComponent.bind(this),navigationButtonComponent:this.getDateNavigatorComponent.bind(this)}),Object(ie.jsx)(f.b,{appointmentComponent:this.getAppointmentComponet.bind(this),appointmentContentComponent:this.getCustomAppointmentContent.bind(this)}),Object(ie.jsx)(f.a,{showCloseButton:!0,showDeleteButton:!0,headerComponent:this.getHeaderComponent.bind(this),visible:this.state.isAppointmentTooltipVisible,appointmentMeta:this.state.appointmentTooltipMetadata,onAppointmentMetaChange:this.onAppointmentMetaChange,onVisibilityChange:function(){return e.setState({isAppointmentTooltipVisible:!1})},contentComponent:this.getTooltipContent.bind(this)}),Object(ie.jsx)(f.f,{allowResize:function(){return!1}})]})}),this.state.realocatedState?Object(ie.jsx)(Ee.a,{visible:this.state.isRealocateModalVisible,onOk:function(){return e.onConfirmationOfRealocation()},onCancel:function(){return e.setState({isRealocateModalVisible:!1,realocatedState:null})},children:Object(ie.jsx)("p",{style:{marginTop:"20px"},children:this.state.realocatedState.state===W?"The appointment submitted can't be concluded during your work period,\n                                        do you want to allocate your free time for this appointment?":"The appointment submitted can't be concluded during your work or free time,\n                                        should the scheduler ignore your sleep period and allocate time in it?"})}):null,Object(ie.jsxs)(Ee.a,{visible:this.state.isMergeModalVisible,footer:[Object(ie.jsx)(v.a,{className:"cancel",onClick:function(){return e.setState({isMergeModalVisible:!1,mergeState:null})},children:"Cancel"},"cancel"),Object(ie.jsx)(v.a,{type:"primary",onClick:function(){return e.onAppointmentMerge(e.state.mergeState,!0)},children:"Merge"},"merge"),Object(ie.jsx)(v.a,{type:"primary",onClick:function(){return e.onAppointmentMerge(e.state.mergeState,!1)},children:"Ignore"},"ignore")],onCancel:function(){return e.setState({isMergeModalVisible:!1,mergeState:null})},className:"merge-modal",children:[Object(ie.jsx)("h2",{children:"Appointment Merging"}),Object(ie.jsxs)("p",{style:{marginTop:"20px"},children:["The appointment that you dragged is overlapping with another appointment of the same job.",Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),"You can press 'Merge' to merge both appointment into one, press 'Ignore' to apply the drag but not merge or 'Cancel' to abort the operation.",Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),"You can separate the merged appointment again by using the partition tool that is avaliable at the appointment options."]})]}),this.state.isRecurrentChangeModalVisible?Object(ie.jsxs)(Ee.a,{visible:this.state.isRecurrentChangeModalVisible,footer:[Object(ie.jsx)(v.a,{className:"cancel",onClick:function(){return e.setState({isRecurrentChangeModalVisible:!1,recurrentChangeState:null})},children:"Cancel"},"cancelRecurrent"),Object(ie.jsx)(v.a,{className:"everything",type:"primary",onClick:function(){return e.onRecurrentAppointmentChange(e.state.recurrentChangeState,"ALL")},children:"Everything"},"everything"),Object(ie.jsxs)(v.a,{className:"day",type:"primary",onClick:function(){return e.onRecurrentAppointmentChange(e.state.recurrentChangeState,"DAY")},children:["All on ",this.state.recurrentChangeState.previousStart.format("dddd")]},"allOnDay"),Object(ie.jsx)(v.a,{className:"this",type:"primary",onClick:function(){return e.onRecurrentAppointmentChange(e.state.recurrentChangeState,"THIS")},children:"Only This"},"onlyThis")],onOk:function(){return!0},onCancel:function(){return e.setState({isRecurrentChangeModalVisible:!1,recurrentChangeState:null})},className:"CHANGED"===this.state.recurrentChangeState.change?"recurrent-change-modal changed":"recurrent-change-modal deleted",children:[Object(ie.jsx)("h2",{children:"Recurrent Appointment Change"}),"CHANGED"===this.state.recurrentChangeState.change?Object(ie.jsxs)("p",{children:['You are currently trying to change the period of one appointment of the recurrent event "',this.state.recurrentChangeState.job.name,'".',Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),"Please specify if this change should only occur to the modified appointment, or all the appointments of this event that are in the same day (",this.state.recurrentChangeState.previousStart.format("dddd"),"). You could also commit the change to every single appointment of the recurrent event.",Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),'Press "Only This" to modify only the selected appointment, "All on ',this.state.recurrentChangeState.previousStart.format("dddd"),'" to modify all the appointments on the same week day or "Everything" to modify all appointments of the recurrent event.']}):Object(ie.jsxs)("p",{children:['You are currently trying to delete the period of one appointment of the recurrent event "',this.state.recurrentChangeState.job.name,'".',Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),"Please specify if this deletion should only occur to the modified appointment, or all the appointments of this event that are in the same day (",this.state.recurrentChangeState.previousStart.format("dddd"),"). You could also delete every single appointment of the recurrent event, removing the event entirely from the scheduler.",Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),'Press "Only This" to delete only the selected appointment, "All on ',this.state.recurrentChangeState.previousStart.format("dddd"),'" to delete all the appointments on the same week day or "Everything" to delete all appointments and the recurrent event.']})]}):null,this.state.isPartitionModalVisible?Object(ie.jsxs)(Ee.a,{visible:this.state.isPartitionModalVisible,onOk:function(){e.partitionForm.current.validateFields().then((function(t){e.onAppointmentPartitionSet(t),e.setState({isPartitionModalVisible:!1})})).catch((function(t){console.log("Validate Failed:",t),e.setState({isPartitionModalVisible:!1})}))},onCancel:function(){return e.setState({isPartitionModalVisible:!1})},className:"hour-splitter-modal",children:[Object(ie.jsx)("h2",{children:"Appointment Partition Tool"}),Object(ie.jsx)("p",{children:"Input the number of maximum number of hours that each partition of this appointment should have, the Scheduler will divide the appointment by the hour inputted "}),Object(ie.jsx)(y.a,{ref:this.partitionForm,name:"partitionForm",children:Object(ie.jsx)(y.a.Item,{name:"hour",rules:[{required:!0,message:"You need to input a number of hours!"},{validator:this.validateHourInserted.bind(this)}],children:Object(ie.jsx)(x.a,{placeholder:"XX",type:"number",prefix:Object(ie.jsx)(X.a,{}),suffix:"Hours"})})})]}):null]})}}]),n}(r.a.Component),Ve=Object(A.b)((function(e){return{workStart:e.period.workStart,workEnd:e.period.workEnd,freeStart:e.period.freeStart,freeEnd:e.period.freeEnd,calendarViewHourStart:e.period.calendarViewHourStart,calendarViewHourEnd:e.period.calendarViewHourEnd,appointments:e.appointment.appointments,jobs:e.appointment.jobs,showSleepPeriod:e.config.showSleepPeriod}}),(function(e){return{addAppointments:function(t){return e(V(t))},updateAppointment:function(t){return e({type:E,payload:t})},deleteAppointment:function(t){return e({type:P,payload:t})},updateJob:function(t){return e(F(t))},deleteJob:function(t){return e({type:N,payload:t})},setShowSleepPeriod:function(t){return e({type:Ie,payload:t})}}}))(Ne);var Fe=function(){return Object(ie.jsx)(Ve,{})},Re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,509)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))},Je=(n(429),n(430),n(73)),He=n(161),_e=n(258),Ye=n.n(_e),Be=n(144),Le=function(e,t){return t instanceof J.a?t.toISOString():t},qe=function(e,t){return"string"===typeof t&&t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?J()(t):t};function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.findIndex((function(e){return e.id===t.id}));if(-1===n)return console.error("The update operation on appointments failed, no appointment with id "+t.id+" found"),e;var a=Object(c.a)(e);return a[n]=t,a}function We(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.findIndex((function(e){return e.id===t.id}));if(-1===n)return console.error("The update operation on jobs failed, no job with id "+t.id+" found"),e;var a=Object(c.a)(e);return a[n]=t,a}function Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(c.a)(e);return t.forEach((function(e){n.splice(n.findIndex((function(t){return t.id===e})),1)})),n}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=t.findIndex((function(t){return t.id===e.id})),r=Object(c.a)(t);r.splice(a,1);var i=Object(c.a)(n);return e.appointments.forEach((function(e){var t=i.findIndex((function(t){return t.id===e}));i.splice(t,1)})),{jobs:r,appointments:i}}var Ke={appointments:[],jobs:[],history:[]},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(u.a)(Object(u.a)({},e),{},{appointments:[].concat(Object(c.a)(e.appointments),Object(c.a)(t.payload))});case E:return Object(u.a)(Object(u.a)({},e),{},{appointments:Ue(e.appointments,t.payload)});case P:return Object(u.a)(Object(u.a)({},e),{},{appointments:Ge(e.appointments,t.payload)});case M:return Object(u.a)(Object(u.a)({},e),{},{jobs:[].concat(Object(c.a)(e.jobs),[t.payload])});case I:return Object(u.a)(Object(u.a)({},e),{},{jobs:We(e.jobs,t.payload)});case N:var n=ze(t.payload,e.jobs,e.appointments),a=n.jobs,r=n.appointments;return Object(u.a)(Object(u.a)({},e),{},{jobs:a,appointments:r});default:return e}},$e={workStart:null,workEnd:null,freeStart:null,freeEnd:null,calendarViewHourStart:0,calendarViewHourEnd:24},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(u.a)(Object(u.a)({},e),{},{workStart:t.payload.start,workEnd:t.payload.end});case le:return Object(u.a)(Object(u.a)({},e),{},{freeStart:t.payload.start,freeEnd:t.payload.end});case Ie:return Object(u.a)(Object(u.a)({},e),{},{calendarViewHourStart:t.payload?0:e.workStart?Math.min(e.workStart,e.freeStart):0,calendarViewHourEnd:t.payload?24:e.workEnd?Math.max(e.workEnd,e.freeEnd):24});default:return e}},Ze={showSleepPeriod:!0},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return Object(u.a)(Object(u.a)({},e),{},{showSleepPeriod:t.payload});default:return e}},tt={key:"root",storage:Ye.a,transforms:[Object(Be.a)((function(e){return JSON.stringify(e,Le)}),(function(e){return JSON.parse(e,qe)}))]},nt=Object(Je.c)({period:Qe,appointment:Xe,config:et}),at=Object(He.a)(tt,nt);n(433);var rt=Object(Je.d)(at,Je.a.apply(void 0,[])),it=Object(He.b)(rt),ot=n(259);o.a.render(Object(ie.jsx)(r.a.StrictMode,{children:Object(ie.jsx)(A.a,{store:rt,children:Object(ie.jsx)(ot.a,{persistor:it,children:Object(ie.jsx)(Fe,{})})})}),document.getElementById("root")),Re()}},[[434,1,2]]]);
//# sourceMappingURL=main.0c2369fe.chunk.js.map